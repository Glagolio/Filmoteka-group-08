var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},s={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in s){var a=s[e];delete s[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},e.parcelRequired7c6=a),a("7EEHk");var i=a("5uEKZ"),n=a("ijW3m");const o=document.querySelector(".form-field"),l=document.querySelector(".home-list"),r=document.querySelector(".spinner-loader"),c=document.querySelector(".search-result");let d="",u=1;function m(e){return e.map((({id:e,poster_path:t,title:s,original_title:a,genres_ids:i,release_date:n})=>`<li class="home-card js-modal-open placeholdify" data-card-movie-id="${e}">\n            <a href="#" class="home-card__link">\n                <div class="card-info">\n                    <img class="home-card__img" src="${t?`https://image.tmdb.org/t/p/w500${t}`:"https://via.placeholder.com/395x574/FFFFFF/FF001B?text=No+poster"}" alt="${s}">\n                    <h2 class="card-info__title">${a}</h2>\n                    <p class="card-info_descr">\n                        <span>${i}</span>\n                        |\n                        <span>${new Date(n).getFullYear()}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`)).join("")}async function f(e,t){const s=new URLSearchParams({api_key:"659c146febfafc17fd54baa17527f7fa",language:"en-US",query:e});return fetch(`https://api.themoviedb.org/3/search/movie?${s}&page=${t}`).then((e=>{if(e.ok)return e.json();throw new Error(e.statusText)})).then((e=>({movies:e.results})))}function h(){if(c.classList.add("is-hidden"),r.classList.remove("is-hidden"),d=null===n.storageLastSearchText||void 0===n.storageLastSearchText?void 0:n.storageLastSearchText.movie,u=null===n.storagePage||void 0===n.storagePage?void 0:n.storagePage.value,""===d)return r.classList.add("is-hidden"),alert("Empty field");f(d).then((({movies:e})=>{if(0===e.length)return r.classList.add("is-hidden"),void c.classList.remove("is-hidden");i.default.save("movies",e),l.innerHTML=m(e),r.classList.add("is-hidden"),setTimeout((()=>{document.querySelectorAll(".placeholdify").forEach((e=>e.classList.remove("placeholdify")))}),2e3)}))}null==o||o.addEventListener("submit",(e=>{if(e.preventDefault(),c.classList.add("is-hidden"),r.classList.remove("is-hidden"),d=o.elements.query.value.trim(),""===d)return r.classList.add("is-hidden"),alert("Empty field");f(d).then((({movies:e})=>{if(0===e.length)return r.classList.add("is-hidden"),void c.classList.remove("is-hidden");i.default.save(n.STORAGE_MOVIES_SEARCH,{movie:d}),i.default.save("movies",e),l.innerHTML=m(e),r.classList.add("is-hidden"),setTimeout((()=>{document.querySelectorAll(".placeholdify").forEach((e=>e.classList.remove("placeholdify")))}),2e3)}))})),a("5RajV");i=a("5uEKZ");a("2nhTy");const v=document.querySelector(".home-list");async function p(e){return(await fetch(`${e}`)).json()}(async function(){return(await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=659c146febfafc17fd54baa17527f7fa&language=en-US")).json()})().then((({genres:e})=>{const t=[...e];localStorage.setItem("arrow",JSON.stringify(t))}));const g=i.default.load("arrow");p("https://api.themoviedb.org/3/trending/movie/week?api_key=659c146febfafc17fd54baa17527f7fa").then((({results:e})=>{e.poster_path;const t=e.map((({id:e,poster_path:t,title:s,original_title:a,genre_ids:i,release_date:n,original_name:o,first_air_date:l})=>{const r=[];let c="";for(const e of i)for(const t of g)e===t.id&&(r.push(t.name),i.length>2&&(c=",Other"));let d=n,u=l;n&&(d=d.slice(0,4)),l&&(u=u.slice(0,4));return`<li class="home-card js-modal-open placeholdify" data-card-movie-id="${e}">\n            <a href="#" class="home-card__link">\n                <div class="card-info">\n                    <img class="home-card__img" src="${`https://image.tmdb.org/t/p/w500${t}`}" alt="${s}">\n                    <h2 class="card-info__title">${a||o}</h2>\n                    <p class="card-info_descr">\n                        <span>${r.splice(0,3)}  ${c}</span>\n                        \n                        |\n                        <span>${d||u}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`})).join("");setTimeout((()=>{document.querySelectorAll(".placeholdify").forEach((e=>e.classList.remove("placeholdify")))}),2e3),i.default.save("movies",e),v.insertAdjacentHTML("beforeend",t)}));p();a("ijW3m"),a("bTcpz"),a("2nhTy"),a("5R1Ed"),a("5uEKZ");n=a("ijW3m");var y=a("2nhTy");const L={comeBackBtn:document.querySelector("button.js-visit-back-btn"),visitModal:document.querySelector("[data-modal].dialog"),visitCloseBtn:document.querySelector("button.js-visit-close-btn")};let _;function E(){L.visitModal.classList.toggle("is-hidden"),!0===L.visitModal.classList.value.includes("hidden")&&(clearTimeout(_),L.comeBackBtn.removeEventListener("click",b),L.visitCloseBtn.removeEventListener("click",E))}function b(){L.visitModal.classList.toggle("is-hidden"),h(),!0===L.visitModal.classList.value.includes("hidden")&&(clearTimeout(_),L.comeBackBtn.removeEventListener("click",b),L.visitCloseBtn.removeEventListener("click",E))}if(L.comeBackBtn.addEventListener("click",b),L.visitCloseBtn.addEventListener("click",E),1==y.currentPage||void 0===(null===n.storagePage||void 0===n.storagePage?void 0:n.storagePage.value)||(E(),_=setTimeout((()=>{E()}),15e3)),"loading"in HTMLImageElement.prototype){console.log("Браузер підтримує lazyload");document.querySelectorAll('image[loading="lazy"]').forEach((e=>{e.src=e.dataset.src}))}else{console.log("Браузер не підтримує lazyload");const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js",e.integrity="sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ==",e.crossOrigin="anonymous",e.referrerpolicy="no-referrer",document.body.appendChild(e)}const S=document.querySelectorAll("image[data-src]");function k(e){console.log("Зображення завантажилось")}console.log(S),S.forEach((e=>{e.addEventListener("load",k,{once:!0})}));
//# sourceMappingURL=index.f1745da3.js.map
