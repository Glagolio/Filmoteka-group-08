var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},s={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in s){var i=s[e];delete s[e];var a={id:e,exports:{}};return t[e]=a,i.call(a.exports,a,a.exports),a.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){s[e]=t},e.parcelRequired7c6=i),i("7EEHk");var a=i("5uEKZ"),n=i("ijW3m"),o=i("3iG6G");const r=document.querySelector(".form-field"),l=document.querySelector(".home-list"),d=document.querySelector(".spinner-loader"),c=document.querySelector(".search-result");let u="",m=1;function f(e){return e.map((({id:e,poster_path:t,title:s,original_title:i,genres_ids:a,release_date:n})=>`<li class="home-card js-modal-open placeholdify" data-card-movie-id="${e}">\n            <a href="#" class="home-card__link">\n                <div class="card-info">\n                    <img class="home-card__img" src="${t?`https://image.tmdb.org/t/p/w500${t}`:"https://via.placeholder.com/395x574/FFFFFF/FF001B?text=No+poster"}" alt="${s}">\n                    <h2 class="card-info__title">${i}</h2>\n                    <p class="card-info_descr">\n                        <span>${a}</span>\n                        |\n                        <span>${new Date(n).getFullYear()}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`)).join("")}async function h(e,t){const s=new URLSearchParams({api_key:"659c146febfafc17fd54baa17527f7fa",language:"en-US",query:e});return fetch(`https://api.themoviedb.org/3/search/movie?${s}&page=${t}`).then((e=>{if(e.ok)return e.json();throw new Error(e.statusText)})).then((e=>({movies:e.results})))}function v(){if(c.classList.add("is-hidden"),d.classList.remove("is-hidden"),u=null===n.storageLastSearchText||void 0===n.storageLastSearchText?void 0:n.storageLastSearchText.movie,m=null===n.storagePage||void 0===n.storagePage?void 0:n.storagePage.value,""===u)return d.classList.add("is-hidden"),alert("Empty field");h(u).then((({movies:e})=>{if(0===e.length)return d.classList.add("is-hidden"),void c.classList.remove("is-hidden");a.default.save("movies",e),l.innerHTML=f(e),setTimeout((()=>{d.classList.add("is-hidden")}),2e3),(0,o.removeSceletonLoad)()}))}null==r||r.addEventListener("submit",(e=>{if(e.preventDefault(),c.classList.add("is-hidden"),d.classList.remove("is-hidden"),u=r.elements.query.value.trim(),""===u)return d.classList.add("is-hidden"),alert("Empty field");h(u).then((({movies:e})=>{if(0===e.length)return d.classList.add("is-hidden"),void c.classList.remove("is-hidden");a.default.save(n.STORAGE_MOVIES_SEARCH,{movie:u}),a.default.save("movies",e),l.innerHTML=f(e),setTimeout((()=>{d.classList.add("is-hidden")}),2e3),(0,o.removeSceletonLoad)()}))})),i("5RajV");a=i("5uEKZ");i("2nhTy");o=i("3iG6G");const g=document.querySelector(".home-list");async function p(e){return(await fetch(`${e}`)).json()}(async function(){return(await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=659c146febfafc17fd54baa17527f7fa&language=en-US")).json()})().then((({genres:e})=>{const t=[...e];localStorage.setItem("arrow",JSON.stringify(t))}));const y=a.default.load("arrow");p("https://api.themoviedb.org/3/trending/movie/week?api_key=659c146febfafc17fd54baa17527f7fa").then((({results:e})=>{e.poster_path;const t=e.map((({id:e,poster_path:t,title:s,original_title:i,genre_ids:a,release_date:n,original_name:o,first_air_date:r})=>{const l=[];let d="";for(const e of a)for(const t of y)e===t.id&&(l.push(t.name),a.length>2&&(d=",Other"));let c=n,u=r;n&&(c=c.slice(0,4)),r&&(u=u.slice(0,4));return`<li class="home-card js-modal-open placeholdify" data-card-movie-id="${e}">\n            <a href="#" class="home-card__link">\n                <div class="card-info">\n                    <img class="home-card__img" src="${`https://image.tmdb.org/t/p/w500${t}`}" alt="${s}">\n                    <h2 class="card-info__title">${i||o}</h2>\n                    <p class="card-info_descr">\n                        <span>${l.splice(0,3)}  ${d}</span>\n                        \n                        |\n                        <span>${c||u}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`})).join("");(0,o.removeSceletonLoad)(),a.default.save("movies",e),g.insertAdjacentHTML("beforeend",t)}));p();i("ijW3m"),i("bTcpz"),i("2nhTy"),i("5R1Ed"),i("5uEKZ");n=i("ijW3m");var L=i("2nhTy");const _={comeBackBtn:document.querySelector("button.js-visit-back-btn"),visitModal:document.querySelector("[data-modal].dialog"),visitCloseBtn:document.querySelector("button.js-visit-close-btn")};let E;function b(){_.visitModal.classList.toggle("is-hidden"),!0===_.visitModal.classList.value.includes("hidden")&&(clearTimeout(E),_.comeBackBtn.removeEventListener("click",S),_.visitCloseBtn.removeEventListener("click",b))}function S(){_.visitModal.classList.toggle("is-hidden"),v(),!0===_.visitModal.classList.value.includes("hidden")&&(clearTimeout(E),_.comeBackBtn.removeEventListener("click",S),_.visitCloseBtn.removeEventListener("click",b))}if(_.comeBackBtn.addEventListener("click",S),_.visitCloseBtn.addEventListener("click",b),1==L.currentPage||void 0===(null===n.storagePage||void 0===n.storagePage?void 0:n.storagePage.value)||(b(),E=setTimeout((()=>{b()}),15e3)),"loading"in HTMLImageElement.prototype){console.log("Браузер підтримує lazyload");document.querySelectorAll('image[loading="lazy"]').forEach((e=>{e.src=e.dataset.src}))}else{console.log("Браузер не підтримує lazyload");const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js",e.integrity="sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ==",e.crossOrigin="anonymous",e.referrerpolicy="no-referrer",document.body.appendChild(e)}const k=document.querySelectorAll("image[data-src]");function T(e){console.log("Зображення завантажилось")}console.log(k),k.forEach((e=>{e.addEventListener("load",T,{once:!0})}));
//# sourceMappingURL=index.748be9cd.js.map
