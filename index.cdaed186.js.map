{"mappings":"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","sources":["src/js/storage.js","src/js/fetchMovies.js","src/js/loadPage.js","src/js/pageInStorage.js","src/js/modal.js","src/js/modalFooter.js","src/js/visitEvents.js"],"sourcesContent":["const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst remove = key => {\n    try { \n      if (localStorage.getItem(key) !== null) { localStorage.removeItem(key); }\n    } catch (error) {\n        console.error(\"Remove state error: \", error.message);\n    }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n};\n","import storage from './storage';\n\nconst formField = document.querySelector('.form-field');\nconst homeList = document.querySelector('.home-list');\nconst spinner = document.querySelector('.spinner-loader');\nconst textError = document.querySelector('.search-result');\nlet movieName = '';\n\nformField.addEventListener('submit', event => {\n  event.preventDefault();\n  textError.classList.add('is-hidden');\n  spinner.classList.remove('is-hidden');\n  movieName = formField.elements.query.value.trim();\n  if (movieName === '') {\n    spinner.classList.add('is-hidden');\n    return alert('Empty field');\n  }\n  fetchMovies(movieName).then(({ movies }) => {\n    if (movies.length === 0) {\n      spinner.classList.add('is-hidden');\n      textError.classList.remove('is-hidden');\n      return\n    }\n    storage.save('movies', movies);\n    homeList.innerHTML = movieCards(movies);\n    spinner.classList.add('is-hidden');\n  });\n});\n\nexport function movieCards(movies) {\n  return movies\n    .map(\n      ({\n        id,\n        poster_path,\n        title,\n        original_title,\n        genres_ids,\n        release_date,\n      }) => {\n        const imgUrl = `https://image.tmdb.org/t/p/w500${poster_path}`;\n        const year = new Date(release_date).getFullYear();\n        return `<li class=\"home-card js-modal-open\" data-card-movie-id=\"${id}\">\n            <a href=\"#\" class=\"home-card__link\">\n                <div class=\"card-info\">\n                    <img class=\"home-card__img\" src=\"${imgUrl}\" alt=\"${title}\">\n                    <h2 class=\"card-info__title\">${original_title}</h2>\n                    <p class=\"card-info_descr\">\n                        <span>${genres_ids}</span>\n                        |\n                        <span>${year}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`;\n      }\n    )\n    .join('');\n}\n\nasync function fetchMovies(movieName) {\n  const searchParams = new URLSearchParams({\n    api_key: '659c146febfafc17fd54baa17527f7fa',\n    language: 'en-US',\n    query: movieName,\n  });\n\n  return fetch(`https://api.themoviedb.org/3/search/movie?${searchParams}`)\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      throw new Error(res.statusText);\n    })\n    .then(data => {\n      return {\n        movies: data.results,\n      };\n    });\n}\n","import storage from './storage';\nconst KEY = '659c146febfafc17fd54baa17527f7fa';\nconst homeList = document.querySelector('.home-list');\n\nconst API_URL_POPULAR = `https://api.themoviedb.org/3/trending/movie/week?api_key=${KEY}`;\n\nasync function fetchFilms(API_URL_POPULAR) {\n\n  let response = await fetch(\n    `${API_URL_POPULAR}`\n  );\n  return response.json();\n}\n\nasync function fetchGenres() {\n  let response = await fetch(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${KEY}&language=en-US`\n  );\n  return response.json();\n}\n\nfetchGenres().then(({ genres }) => {\n  const arr = [...genres];\n  localStorage.setItem('arrow', JSON.stringify(arr));\n});\nconst values = storage.load('arrow');\n\n\n  fetchFilms(API_URL_POPULAR).then(({ results }) => {\n\n  results.poster_path;\n\n\n  const mark = results\n    .map(\n      ({\n        id,\n        poster_path,\n        title,\n        original_title,\n        genre_ids,\n        release_date,\n        original_name,\n        first_air_date,\n      }) => {\n        const genreArr = [];\n        let other = '';\n        for (const genreId of genre_ids) {\n          for (const value of values) {\n            if (genreId === value.id) {\n              genreArr.push(value.name);\n              if (genre_ids.length > 2) {\n                other = ',Other';\n              }\n            }\n          }\n        }\n\n        let a = release_date;\n\n        let b = first_air_date;\n        if (release_date) {\n          a = a.slice(0, 4);\n        }\n        if (first_air_date) {\n          b = b.slice(0, 4);\n        }\n\n        const imgUrl = `https://image.tmdb.org/t/p/w500${poster_path}`;\n        return `<li class=\"home-card js-modal-open\" data-card-movie-id=\"${id}\">\n            <a href=\"#\" class=\"home-card__link\">\n                <div class=\"card-info\">\n                    <img class=\"home-card__img\" src=\"${imgUrl}\" alt=\"${title}\">\n                    <h2 class=\"card-info__title\">${original_title || original_name}</h2>\n                    <p class=\"card-info_descr\">\n                        <span>${genreArr.splice(0, 3)}  ${other}</span>\n                        \n                        |\n                        <span>${a || b}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`;\n      }\n    )\n    .join('');\n  storage.save('movies', results);\n  homeList.insertAdjacentHTML('beforeend', mark);\n});\n","import storage from './storage';\n\nexport const STORAGE_PAGE_KEY = 'last visit page';\nexport const storagePage = storage.load(STORAGE_PAGE_KEY);\n\ncurrentPage = 3;\n\nchangeStoragePage();\n\nfunction changeStoragePage() {\n  if (currentPage > 1 && currentPage !== storagePage?.value) {\n    storage.remove(STORAGE_PAGE_KEY);\n    storage.save(STORAGE_PAGE_KEY, { value: currentPage });\n  }\n}\n","import storage from './storage';\n\nconst backdrop = document.querySelector('[data-modal]');\nconst closeButton = document.querySelector('[data-modal-close]');\nconst cardsContainer = document.querySelector('.home-container');\n\ncardsContainer.addEventListener('click', e => {\n  //Тиць по 'js-modal-open' -> відкриває модалку\n  if (e.target.closest('.js-modal-open')) {\n    e.preventDefault();\n    openModal(e.target.closest('.js-modal-open').dataset.cardMovieId);\n  }\n});\n\n// Тиць по 'data-modal-close' ->закриває модалку\ncloseButton.addEventListener('click', closeModal);\n\n//Press по Esc ->закриває модалку\nfunction pressEsc(e) {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n}\n\n// Тиць по backdrop -> закриває модалку\nbackdrop.addEventListener('click', backdropClick);\n\nfunction backdropClick(e) {\n  if (e.currentTarget === e.target) {\n    closeModal();\n    return;\n  }\n  if (e.target.nodeName === 'BUTTON') {\n    addMovieToLibrary(e.target.closest('.movie-btn'));\n  }\n}\n\n// Якщо модалка відкрита -> кидаємо AddEventListener\nfunction openModal(movieId) {\n  document.addEventListener('keydown', pressEsc);\n\n  backdrop.querySelector('.modal-movie').dataset.modalMovieId = movieId;\n  backdrop.querySelector('.modal-movie').innerHTML = getModalMovieMarkup(movieId);\n  document.body.style.overflow = 'hidden';\n  backdrop.classList.remove('is-hidden');\n}\n\n// Як тільки закривається модалка -> знімаємо EventListener\nfunction closeModal() {\n  document.addEventListener('keydown', pressEsc);\n  document.body.style.overflow = '';\n  backdrop.classList.add('is-hidden');\n}\n\nfunction getModalMovieMarkup(movieId) {\n  const {\n    poster_path,\n    title,\n    original_title,\n    genres_ids,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    overview,\n  } = storage.load('movies')?.find(movie => movie.id.toString() === movieId);\n\n  movieId = movieId.toString();\n\n  // const btnAddToWatched = isInLibrary('watched-list', movieId.toString())\n  //   ? `<button class=\"modal-movie__btn modal-movie_btn-watched added\" data-modal-add-to=\"watched\">REMOVE FROM<br>WATCHED</button>`\n  //   : `<button class=\"modal-movie__btn modal-movie__btn-watched\" data-modal-add-to=\"watched\">ADD TO<br>WATCHED</button>`;\n\n  // const btnAddToQueue = isInLibrary('queue-list', movieId.toString())\n  //   ? `<button class=\"modal-movie__btn modal-movie__btn-queue added\" data-modal-add-to=\"queue\">REMOVE FROM<br>QUEUE</button>`\n  //   : `<button class=\"modal-movie__btn modal-movie__btn-queue\" data-modal-add-to=\"queue\">ADD TO<br>QUEUE</button>`;\n\n  let addedClass = isInLibrary('watched-list', movieId.toString()) ? 'added' : '';\n  const btnAddToWatched = `<div class=\"modal-movie__btn movie-btn movie-btn--watched ${addedClass}\" data-modal-add-to=\"watched\">\n                          <div class=\"movie-btn__inner\">\n                            <button class=\"remove\">REMOVE FROM<br>WATCHED</button>\n                            <button class=\"add\">ADD TO<br>WATCHED</button>\n                          </div>\n                        </div>`;\n\n  addedClass = isInLibrary('queue-list', movieId.toString()) ? 'added' : '';\n  const btnAddToQueue = `<div class=\"modal-movie__btn movie-btn movie-btn--queue ${addedClass}\" data-modal-add-to=\"queue\">\n                          <div class=\"movie-btn__inner\">\n                            <button class=\"remove\">REMOVE FROM<br>QUEUE</button>\n                            <button class=\"add\">ADD TO<br>QUEUE</button>\n                          </div>\n                        </div>`;\n\n  return `<div class=\"modal-movie__poster\">\n            <img src='https://image.tmdb.org/t/p/w500${poster_path}' alt=\"${title}\" />\n          </div>\n            <div class=\"modal-movie__info\">\n                <h2 class=\"modal-movie__title\">${title}</h2>\n                <table class=\"movie-table\">\n                    <tr>\n                        <td class=\"movie-table__title\">Vote / Votes</td>\n                        <td class=\"movie-table__info\">\n                            <span class=\"vote\">${vote_average}</span>\n                            <span>/</span>\n                            <span class=\"votes\">${vote_count}</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Popularity</td>\n                        <td class=\"movie-table__info\">${popularity}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Original Title</td>\n                        <td class=\"movie-table__info\">${original_title}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Genre</td>\n                        <td class=\"movie-table__info\">${genres_ids}</td>\n                    </tr>\n                </table>\n                <div class=\"modal-movie__box\">\n                <div class=\"modal-movie__about\">\n                    <p class=\"modal-movie__description\">ABOUT</p>\n                    <p class=\"modal-movie__text\">${overview}</p>\n                </div>\n                <div class=\"modal-movie__buttons\">\n                    ${btnAddToWatched}\n                    ${btnAddToQueue}\n                </div>\n                </div>\n            </div>`;\n}\n\n/* -----------------------\n\nModal buttons functionality\n\n----------------------- */\n\nfunction addMovieToLibrary(button) {\n  // console.dir(button);\n  const key = button.dataset?.modalAddTo + '-list';\n  const movieId = button.closest('.modal-movie').dataset.modalMovieId;\n\n  const value = storage.load('movies')?.find(movie => movie.id.toString() === movieId);\n  // console.dir(value.id);\n\n  let currentList = storage.load(key) || [];\n  // console.dir(currentList);\n\n  if (storage.load(key) && isInLibrary(key, value.id.toString())) {\n    button.classList.remove('added');\n    currentList = currentList.filter(movie => movie.id.toString() != value.id);\n  } else {\n    currentList.push(value);\n    button.classList.add('added');\n  }\n\n  storage.save(key, currentList);\n}\n\nfunction isInLibrary(storageKey, valueId) {\n  return storage.load(storageKey)?.some(movie => movie.id.toString() === valueId);\n}\n","const modalLink = document.querySelector('.footer__rights-link');\nconst closeBtn = document.querySelector('.modal__closeBtn');\nconst backDropp = document.querySelector('.backdropp');\nconsole.log(backDropp);\nmodalLink.addEventListener('click', e => {\n  e.preventDefault();\n  backDropp.classList.toggle('is-hidden');\n});\ncloseBtn.addEventListener('click', e => {\n  backDropp.classList.toggle('is-hidden');\n});\n","import { storagePage } from './pageInStorage';\n\n\nconst refs = {\n    comeBackButton: document.querySelector('button.js-visit-back-btn'),\n    visitModal: document.querySelector(\"[data-modal].dialog\"),\n    visitClose: document.querySelector(\"button.js-dialog-close\"),\n    visitCloseBtn: document.querySelector(\"button.js-visit-close-btn\"),\n};\n\n\n    refs.comeBackButton.addEventListener(\"click\", loadStoragePage);\n    refs.visitClose.addEventListener(\"click\", toggleModal);\n    refs.visitCloseBtn.addEventListener(\"click\", toggleModal);\n    \n(() => {\n    if (currentPage == 1 || storagePage.value === undefined) {\n        return \n    } else {        \n        toggleModal();\n        return  timerId = setTimeout(() => { toggleModal() }, 15000);      \n    }\n})();    \n\nfunction loadStoragePage() {     \n    currentPage = storagePage.value;\n    toggleModal();\n};\n\nfunction toggleModal() {   \n    refs.visitModal.classList.toggle(\"is-hidden\");     \n    \n    if (refs.visitModal.classList.value.includes(\"hidden\") === true) {\n           clearTimeout(timerId);  \n        refs.comeBackButton.removeEventListener(\"click\", loadStoragePage);\n        refs.visitClose.removeEventListener(\"click\", toggleModal);\n        refs.visitCloseBtn.removeEventListener(\"click\", toggleModal);\n    };\n};"],"names":["$3fff5e8daf4b13a6$export$2e2bcd8739ae039","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","undefined","parse","removeItem","$16230cf6cab73dd4$var$formField","document","querySelector","$16230cf6cab73dd4$var$homeList","$16230cf6cab73dd4$var$spinner","$16230cf6cab73dd4$var$textError","$16230cf6cab73dd4$var$movieName","addEventListener","event","preventDefault","classList","add","remove","elements","query","trim","alert","async","movieName1","searchParams","URLSearchParams","api_key","language","fetch","then","res","ok","json","Error","statusText","data","movies","results","$16230cf6cab73dd4$var$fetchMovies","length","save","innerHTML","map","id","poster_path","title","original_title","genres_ids","release_date","Date","getFullYear","join","$16230cf6cab73dd4$export$867842ca7ae981de","$8a393290a593310b$var$homeList","$8a393290a593310b$var$fetchGenres","genres","arr","$8a393290a593310b$var$values","load","API_URL_POPULAR1","$8a393290a593310b$var$fetchFilms","mark","genre_ids","original_name","first_air_date","genreArr","other","genreId","push","name","a","b","slice","splice","insertAdjacentHTML","$d567087ff47545b2$export$1826db2756105efe","currentPage","$8a7e756c566dd1ea$var$backdrop","$8a7e756c566dd1ea$var$closeButton","$8a7e756c566dd1ea$var$pressEsc","e","code","$8a7e756c566dd1ea$var$closeModal","body","style","overflow","$8a7e756c566dd1ea$var$isInLibrary","storageKey","valueId","ref","some","movie","toString","movieId","target","closest","dataset","cardMovieId","modalMovieId","vote_average","vote_count","popularity","overview","find","addedClass","btnAddToWatched","$8a7e756c566dd1ea$var$getModalMovieMarkup","currentTarget","nodeName","button","ref1","modalAddTo","currentList","filter","$8a7e756c566dd1ea$var$addMovieToLibrary","$44332e2831bc6283$var$modalLink","$44332e2831bc6283$var$closeBtn","$44332e2831bc6283$var$backDropp","log","toggle","$ffef372a5b1a0ba3$var$refs","comeBackButton","visitModal","visitClose","visitCloseBtn","$ffef372a5b1a0ba3$var$loadStoragePage","$ffef372a5b1a0ba3$var$toggleModal","includes","clearTimeout","timerId","removeEventListener","setTimeout"],"version":3,"file":"index.cdaed186.js.map"}