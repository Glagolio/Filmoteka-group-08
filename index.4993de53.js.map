{"mappings":"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","sources":["src/js/fetchMovies.js","src/js/storage.js","src/js/pageInStorage.js","src/js/pagination.js","src/js/modal.js","src/js/modalFooter.js"],"sourcesContent":["import storage from './storage';\nimport { storagePage,STORAGE_MOVIES_SEARCH,storageLastSearchText } from './pageInStorage';\n\nconst formField = document.querySelector('.form-field');\nconst homeList = document.querySelector('.home-list');\nconst spinner = document.querySelector('.spinner-loader');\nconst textError = document.querySelector('.search-result');\nlet movieName = '';\nlet page = 1;\n\nformField?.addEventListener('submit', event => {\n  event.preventDefault();\n  textError.classList.add('is-hidden');\n  spinner.classList.remove('is-hidden');\n  movieName = formField.elements.query.value.trim(); \n  if (movieName === '') {\n    spinner.classList.add('is-hidden');\n    return alert('Empty field');\n  }\n  fetchMovies(movieName).then(({ movies }) => {\n    if (movies.length === 0) {\n      spinner.classList.add('is-hidden');\n      textError.classList.remove('is-hidden');\n      return;\n    }\n    storage.save(STORAGE_MOVIES_SEARCH,{movie: movieName});\n    storage.save('movies', movies);\n    homeList.innerHTML = movieCards(movies);\n    spinner.classList.add('is-hidden');\n     setTimeout(() => {\n      const arr = document.querySelectorAll('.placeholdify');\n      arr.forEach(el => el.classList.remove('placeholdify'));\n      },2000);\n  });\n});\n\nexport function movieCards(movies) {\n  return movies\n    .map(({ id, poster_path, title, original_title, genres_ids, release_date }) => {\n      const imgUrl = poster_path\n        ? `https://image.tmdb.org/t/p/w500${poster_path}`\n        : // : './images/netuNichego.png';\n          'https://via.placeholder.com/395x574/FFFFFF/FF001B?text=No+poster';\n      const year = new Date(release_date).getFullYear();\n      return `<li class=\"home-card js-modal-open placeholdify\" data-card-movie-id=\"${id}\">\n            <a href=\"#\" class=\"home-card__link\">\n                <div class=\"card-info\">\n                    <img class=\"home-card__img\" src=\"${imgUrl}\" alt=\"${title}\">\n                    <h2 class=\"card-info__title\">${original_title}</h2>\n                    <p class=\"card-info_descr\">\n                        <span>${genres_ids}</span>\n                        |\n                        <span>${year}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`;\n    })\n    .join('');\n}\n   \n \n\nasync function fetchMovies(movieName,page) {\n  const searchParams = new URLSearchParams({\n    api_key: '659c146febfafc17fd54baa17527f7fa',\n    language: 'en-US',\n    query: movieName,\n  });\n\n  return fetch(`https://api.themoviedb.org/3/search/movie?${searchParams}&page=${page}`)\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      throw new Error(res.statusText);\n    })\n    .then(data => {\n      return {\n        movies: data.results,\n      };\n    });\n      \n}\n\n\n//load last page search\nexport function loadStoragePage() {      \n  textError.classList.add('is-hidden');\n  spinner.classList.remove('is-hidden');\n  movieName = storageLastSearchText?.movie;\n  page = storagePage?.value;\n  if (movieName === '') {\n    spinner.classList.add('is-hidden');\n    return alert('Empty field');\n  }\n   fetchMovies(movieName).then(({ movies }) => {\n    if (movies.length === 0) {\n      spinner.classList.add('is-hidden');\n      textError.classList.remove('is-hidden');\n      return;\n    }    \n    storage.save('movies', movies);\n    homeList.innerHTML = movieCards(movies);\n    spinner.classList.add('is-hidden');\n     setTimeout(() => {\n      const arr = document.querySelectorAll('.placeholdify');\n      arr.forEach(el => el.classList.remove('placeholdify'));\n      },2000);\n  });\n};\n \n\n","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst remove = key => {\n    try { \n      if (localStorage.getItem(key) !== null) { localStorage.removeItem(key); }\n    } catch (error) {\n        console.error(\"Remove state error: \", error.message);\n    }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n};\n","import storage from './storage';\n// import { currentPage } from './pagination';\nimport * as page from './pagination';\nexport const STORAGE_PAGE_KEY = 'last visit page';\nexport const STORAGE_MOVIES_SEARCH = 'last visit search'\nexport const storagePage = storage.load(STORAGE_PAGE_KEY);\nexport const storageLastSearchText = storage.load(STORAGE_MOVIES_SEARCH);\n\n\nchangeStoragePage();\n\nfunction changeStoragePage() {   \n    storage.save(STORAGE_PAGE_KEY, { value: page.currentPage });\n  \n}\n","const inputRef = document.querySelector('.js-search-form');\nconst gallery = document.querySelector('.js-card-library');\n\nconst btn1Ref = document.querySelector('[data-index=\"1\"]');\nconst btn2Ref = document.querySelector('[data-index=\"2\"]');\nconst btn3Ref = document.querySelector('[data-index=\"3\"]');\nconst btn4Ref = document.querySelector('[data-index=\"4\"]');\nconst btn5Ref = document.querySelector('[data-index=\"5\"]');\nconst firstPageRef = document.querySelector('.first-button');\nconst lastPageRef = document.querySelector('.last-button');\nconst paginationRef = document.querySelector('.pagination-container');\nconst rightArrowRef = document.querySelector('.arrow-right');\nconst leftArrowRef = document.querySelector('.arrow-left');\nconst prevDotsRef = document.querySelector('#previous');\nconst afterDotsRef = document.querySelector('#after');\n\npaginationRef.addEventListener('click', onPaginationClick);\n\nlet currentPage = 1;\n\nlet btns = document.querySelectorAll('.pagination-button');\n\nprevDotsRef.hidden = true;\nleftArrowRef.hidden = true;\nfirstPageRef.hidden = true;\n\nfunction onPaginationClick(event) {\n  if (event.target.tagName === 'BUTTON') {\n    if (Number(event.target.textContent)) {\n      currentPage = Number(event.target.textContent);\n    }\n\n    prevDotsRef.hidden = true;\n    afterDotsRef.hidden = true;\n\n    if (event.target.classList.contains('pagination-button')) {\n      btns.forEach(el => el.classList.remove('pagination--current'));\n      event.target.classList.add('pagination--current');\n    }\n\n    if (event.target.classList.contains('arrow-right') && currentPage < 1000) {\n      btns.forEach(el => el.classList.remove('pagination--current'));\n      btn1Ref.classList.add('pagination--current');\n      btn1Ref.textContent = Number(btn1Ref.textContent) + 5;\n      btn2Ref.textContent = Number(btn2Ref.textContent) + 5;\n      btn3Ref.textContent = Number(btn3Ref.textContent) + 5;\n      btn4Ref.textContent = Number(btn4Ref.textContent) + 5;\n      btn5Ref.textContent = Number(btn5Ref.textContent) + 5;\n      currentPage = btn1Ref.textContent;\n    }\n\n    if (event.target.classList.contains('arrow-left') && currentPage >= 5) {\n      btns.forEach(el => el.classList.remove('pagination--current'));\n      btn1Ref.textContent = Number(btn1Ref.textContent) - 5;\n      btn2Ref.textContent = Number(btn2Ref.textContent) - 5;\n      btn3Ref.textContent = Number(btn3Ref.textContent) - 5;\n      btn4Ref.textContent = Number(btn4Ref.textContent) - 5;\n      btn5Ref.textContent = Number(btn5Ref.textContent) - 5;\n      btn5Ref.classList.add('pagination--current');\n      currentPage = btn5Ref.textContent;\n    }\n\n    if (event.target.classList.contains('first-button')) {\n      btns.forEach(el => el.classList.remove('pagination--current'));\n      btn1Ref.textContent = 1;\n      btn2Ref.textContent = 2;\n      btn3Ref.textContent = 3;\n      btn4Ref.textContent = 4;\n      btn5Ref.textContent = 5;\n      btn1Ref.classList.add('pagination--current');\n      currentPage = btn1Ref.textContent;\n      leftArrowRef.hidden = true;\n      prevDotsRef.hidden = true;\n      firstPageRef.hidden = true;\n    }\n\n    if (event.target.classList.contains('last-button')) {\n      btns.forEach(el => el.classList.remove('pagination--current'));\n      btn1Ref.textContent = Number(lastPageRef.textContent) - 4;\n      btn2Ref.textContent = Number(lastPageRef.textContent) - 3;\n      btn3Ref.textContent = Number(lastPageRef.textContent) - 2;\n      btn4Ref.textContent = Number(lastPageRef.textContent) - 1;\n      btn5Ref.textContent = lastPageRef.textContent;\n      btn5Ref.classList.add('pagination--current');\n      currentPage = btn5Ref.textContent;\n      rightArrowRef.hidden = true;\n      afterDotsRef.hidden = true;\n      lastPageRef.hidden = true;\n    }\n\n    if (Number(currentPage) > 5) {\n      leftArrowRef.hidden = false;\n      prevDotsRef.hidden = false;\n      firstPageRef.hidden = false;\n    } else {\n      leftArrowRef.hidden = true;\n      prevDotsRef.hidden = true;\n      firstPageRef.hidden = true;\n    }\n\n    if (Number(currentPage) < 996) {\n      rightArrowRef.hidden = false;\n      afterDotsRef.hidden = false;\n      lastPageRef.hidden = false;\n    }\n\n    gallery.innerHTML = '';\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n\n    if (inputRef.value !== '') {\n      fetchMovies(inputRef.value, currentPage);\n    } else {\n      fetchFilms();\n    }\n  }\n}\n\nlet pageSize = 9;\n\nfunction defineResultsPerPage() {\n  if (window.innerWidth >= 1024) {\n    pageSize = 9;\n  } else if (window.innerWidth >= 768 && window.innerWidth < 1024) {\n    pageSize = 8;\n  } else if (window.innerWidth < 768) {\n    pageSize = 4;\n  }\n  return pageSize;\n}\n\n\nexport { currentPage, defineResultsPerPage};\n","import storage from './storage';\n\nconst backdrop = document.querySelector('[data-modal]');\nconst closeButton = document.querySelector('[data-modal-close]');\nconst cardsContainer = document.querySelector('.movies-container');\n\ncardsContainer.addEventListener('click', e => {\n  //Тиць по 'js-modal-open' -> відкриває модалку\n  if (e.target.closest('.js-modal-open')) {\n    e.preventDefault();\n    openModal(e.target.closest('.js-modal-open').dataset.cardMovieId);\n  }\n});\n\n// Тиць по 'data-modal-close' ->закриває модалку\ncloseButton.addEventListener('click', closeModal);\n\n//Press по Esc ->закриває модалку\nfunction pressEsc(e) {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n}\n\n// Тиць по backdrop -> закриває модалку\nbackdrop.addEventListener('click', backdropClick);\n\nfunction backdropClick(e) {\n  if (e.currentTarget === e.target) {\n    closeModal();\n    return;\n  }\n  if (e.target.nodeName === 'BUTTON') {\n    addMovieToLibrary(e.target.closest('.movie-btn'));\n  }\n}\n\n// Якщо модалка відкрита -> кидаємо AddEventListener\nfunction openModal(movieId) {\n  document.addEventListener('keydown', pressEsc);\n\n  backdrop.querySelector('.modal-movie').dataset.modalMovieId = movieId;\n  backdrop.querySelector('.modal-movie').innerHTML = getModalMovieMarkup(movieId);\n  document.body.style.overflow = 'hidden';\n  backdrop.classList.remove('is-hidden');\n  // const { vote_average } =\n  //   getMovieFromLocalStorage(movieId, 'movies') ||\n  //   getMovieFromLocalStorage(movieId, 'watched-list') ||\n  //   getMovieFromLocalStorage(movieId, 'queue-list');\n  // console.log(vote_average);\n  const vote_average = backdrop.querySelector('#out').textContent;\n  outNum(vote_average, '#out');\n}\n\nfunction getMovieFromLocalStorage(movieId, key) {\n  return storage.load(key)?.find(movie => movie.id.toString() === movieId);\n}\n\n// Як тільки закривається модалка -> знімаємо EventListener\nfunction closeModal() {\n  storage.remove('current-movie');\n  document.addEventListener('keydown', pressEsc);\n  document.body.style.overflow = '';\n  backdrop.classList.add('is-hidden');\n}\n\nfunction getModalMovieMarkup(movieId) {\n  const currentMovie =\n    getMovieFromLocalStorage(movieId, 'movies') ||\n    getMovieFromLocalStorage(movieId, 'watched-list') ||\n    getMovieFromLocalStorage(movieId, 'queue-list');\n\n  storage.save('current-movie', currentMovie);\n\n  const {\n    poster_path,\n    title,\n    original_title,\n    genres_ids,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    overview,\n  } = currentMovie;\n\n  movieId = movieId.toString();\n\n  let addedClass = isInLibrary('watched-list', movieId.toString()) ? 'added' : '';\n  const btnAddToWatched = `<div class=\"modal-movie__btn movie-btn movie-btn--watched ${addedClass}\" data-modal-add-to=\"watched\">\n                          <div class=\"movie-btn__inner\">\n                            <button class=\"remove\">REMOVE FROM<br>WATCHED</button>\n                            <button class=\"add\">ADD TO<br>WATCHED</button>\n                          </div>\n                        </div>`;\n\n  addedClass = isInLibrary('queue-list', movieId.toString()) ? 'added' : '';\n  const btnAddToQueue = `<div class=\"modal-movie__btn movie-btn movie-btn--queue ${addedClass}\" data-modal-add-to=\"queue\">\n                          <div class=\"movie-btn__inner\">\n                            <button class=\"remove\">REMOVE FROM<br>QUEUE</button>\n                            <button class=\"add\">ADD TO<br>QUEUE</button>\n                          </div>\n                        </div>`;\n\n  return `<div class=\"modal-movie__poster\">\n            <img src='https://image.tmdb.org/t/p/w500${poster_path}' alt=\"${title}\" />\n          </div>\n            <div class=\"modal-movie__info\">\n                <h2 class=\"modal-movie__title\">${title}</h2>\n                <table class=\"movie-table\">\n                    <tr>\n                        <td class=\"movie-table__title\">Vote / Votes</td>\n                        <td class=\"movie-table__info\">\n                            <span id=\"out\" class=\"vote\">${vote_average.toFixed(1)}</span>\n                            <span>/</span>\n                            <span class=\"votes\">${vote_count}</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Popularity</td>\n                        <td class=\"movie-table__info\">${popularity.toFixed(0)}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Original Title</td>\n                        <td class=\"movie-table__info\">${original_title}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Genre</td>\n                        <td class=\"movie-table__info\">${genres_ids}</td>\n                    </tr>\n                </table>\n                <div class=\"modal-movie__box\">\n                <div class=\"modal-movie__about\">\n                    <p class=\"modal-movie__description\">ABOUT</p>\n                    <p class=\"modal-movie__text\">${overview}</p>\n                </div>\n                <div class=\"modal-movie__buttons\">\n                    ${btnAddToWatched}\n                    ${btnAddToQueue}\n                </div>\n                </div>\n            </div>`;\n}\n\n/* -----------------------\n\nModal buttons functionality\n\n----------------------- */\n\nfunction addMovieToLibrary(button) {\n  const key = button.dataset?.modalAddTo + '-list';\n  // const movieId = button.closest('.modal-movie').dataset.modalMovieId;\n\n  const SOURCE_KEY = 'current-movie';\n\n  const value = storage.load(SOURCE_KEY);\n\n  if (storage.load(key) && isInLibrary(key, value.id.toString())) {\n    removeFromStorage(key, value, button);\n  } else {\n    if (key.includes('watch') && isInLibrary('queue-list', value.id.toString())) {\n      console.log('already in queue');\n      removeFromStorage(\n        'queue-list',\n        value,\n        button.parentElement.querySelector('.movie-btn--queue')\n      );\n    }\n    addToStorage(key, value, button);\n  }\n}\n\nfunction addToStorage(key, value, button) {\n  let currentList = storage.load(key) || [];\n  currentList.push(value);\n  button.classList.add('added');\n  storage.save(key, currentList);\n}\n\nfunction removeFromStorage(key, value, button) {\n  let currentList = storage.load(key) || [];\n  button.classList.remove('added');\n  currentList = currentList.filter(movie => movie.id.toString() != value.id);\n  storage.save(key, currentList);\n}\n\nfunction isInLibrary(storageKey, valueId) {\n  return storage.load(storageKey)?.some(movie => movie.id.toString() === valueId);\n}\n\nfunction outNum(num, elem) {\n  const time = 2500;\n  const step = 0.1;\n  let e = document.querySelector('#out');\n  let n = 0;\n  let t = Math.round(time / (num / step));\n  let interval = setInterval(() => {\n    n = n + step;\n    if (n >= num) {\n      clearInterval(interval);\n    }\n    e.innerHTML = n.toFixed(1);\n  }, t);\n}\n","const modalLink = document.querySelector('.footer__rights-link');\nconst closeBtn = document.querySelector('.modal__closeBtn');\nconst backDropp = document.querySelector('.backdropp');\nconsole.log(backDropp);\n\nmodalLink.addEventListener('click', e => {\n  e.preventDefault();\n  backDropp.classList.toggle('is-hidden');\n  document.addEventListener('keydown', pressEsc);\n});\ncloseBtn.addEventListener('click', e => {\n  backDropp.classList.remove('is-hidden');\n});\n\nfunction pressEsc(e) {\n  console.log(e);\n\n  if (e.code === 'Escape') {\n    backDropp.classList.add('is-hidden');\n    document.removeEventListener('keydown', pressEsc);\n  }\n}\n\nbackDropp.addEventListener('click', onBackdropp);\n\nfunction onBackdropp(e) {\n  document.removeEventListener('keydown', pressEsc);\n  backDropp.classList.add('is-hidden');\n}\n"],"names":["$5uEKZ","parcelRequire","$16230cf6cab73dd4$var$formField","document","querySelector","$16230cf6cab73dd4$var$homeList","$16230cf6cab73dd4$var$spinner","$16230cf6cab73dd4$var$textError","$16230cf6cab73dd4$var$movieName","$16230cf6cab73dd4$var$page","$16230cf6cab73dd4$export$867842ca7ae981de","movies","map","id","poster_path","title","original_title","genres_ids","release_date","Date","getFullYear","join","async","$16230cf6cab73dd4$var$fetchMovies","movieName1","page1","searchParams","URLSearchParams","api_key","language","query","fetch","then","res","ok","json","Error","statusText","data","results","$16230cf6cab73dd4$export$588d92c3164a0c5a","classList","add","remove","$ijW3m","storageLastSearchText","movie","storagePage","value","alert","length","default","save","innerHTML","setTimeout","querySelectorAll","forEach","el","addEventListener","event","preventDefault","elements","trim","STORAGE_MOVIES_SEARCH","$3fff5e8daf4b13a6$export$2e2bcd8739ae039","key","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","undefined","parse","removeItem","$d567087ff47545b2$export$6480921c90b27dca","$d567087ff47545b2$export$ade5218dc613f789","$d567087ff47545b2$export$1826db2756105efe","load","$d567087ff47545b2$export$4505c8f675952b2a","$2nhTy","currentPage","$1bab9c519cfa82bc$var$inputRef","$1bab9c519cfa82bc$var$gallery","$1bab9c519cfa82bc$var$btn1Ref","$1bab9c519cfa82bc$var$btn2Ref","$1bab9c519cfa82bc$var$btn3Ref","$1bab9c519cfa82bc$var$btn4Ref","$1bab9c519cfa82bc$var$btn5Ref","$1bab9c519cfa82bc$var$firstPageRef","$1bab9c519cfa82bc$var$lastPageRef","$1bab9c519cfa82bc$var$paginationRef","$1bab9c519cfa82bc$var$rightArrowRef","$1bab9c519cfa82bc$var$leftArrowRef","$1bab9c519cfa82bc$var$prevDotsRef","$1bab9c519cfa82bc$var$afterDotsRef","target","tagName","Number","textContent","$1bab9c519cfa82bc$export$385972cd6b54c3e1","hidden","contains","$1bab9c519cfa82bc$var$btns","window","scrollTo","top","behavior","fetchMovies","fetchFilms","$8a7e756c566dd1ea$var$backdrop","$8a7e756c566dd1ea$var$closeButton","$8a7e756c566dd1ea$var$pressEsc","e","code","$8a7e756c566dd1ea$var$closeModal","$8a7e756c566dd1ea$var$getMovieFromLocalStorage","movieId","ref","find","toString","body","style","overflow","$8a7e756c566dd1ea$var$removeFromStorage","button","currentList","filter","$8a7e756c566dd1ea$var$isInLibrary","storageKey","valueId","some","closest","dataset","modalMovieId","currentMovie","vote_average","vote_count","popularity","overview","addedClass","btnAddToWatched","btnAddToQueue","toFixed","$8a7e756c566dd1ea$var$getModalMovieMarkup","num","elem","time","step","n","t","Math","round","interval","setInterval","clearInterval","$8a7e756c566dd1ea$var$outNum","$8a7e756c566dd1ea$var$openModal","cardMovieId","currentTarget","nodeName","modalAddTo","SOURCE_KEY","includes","log","parentElement","push","$8a7e756c566dd1ea$var$addToStorage","$8a7e756c566dd1ea$var$addMovieToLibrary","$44332e2831bc6283$var$modalLink","$44332e2831bc6283$var$closeBtn","$44332e2831bc6283$var$backDropp","$44332e2831bc6283$var$pressEsc","removeEventListener","toggle"],"version":3,"file":"index.4993de53.js.map"}