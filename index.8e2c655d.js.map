{"mappings":"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","sources":["src/index.js","src/js/fetchMovies.js","src/js/loadPage.js","src/js/pagination.js","src/js/visitEvents.js","src/js/lazy-loading.js"],"sourcesContent":["import './js/common';\nimport './js/fetchMovies';\nimport './js/arrowUp';\nimport './js/loadPage';\nimport './js/modal';\nimport './js/pagination';\nimport './js/modalFooter';\nimport './js/storage';\nimport './js/visitEvents';\nimport './js/lazy-loading';\nimport './js/checkStoradgeAfterModal';\n\n","import storage from './storage';\n\n// import { POPULAR_STORAGE_KEY, STORAGE_MOVIES_SEARCH, storageLastSearchText, STORAGE_PAGE_KEY } from './pageInStorage';\n\n// import { storagePage, STORAGE_MOVIES_SEARCH, storageLastSearchText } from './pageInStorage';\n\nimport { removeSceletonLoad } from './sceletonLoad';\n\nconst formField = document.querySelector('.form-field');\nconst homeList = document.querySelector('.home-list');\nconst spinner = document.querySelector('.spinner-loader');\nconst textError = document.querySelector('.search-result');\nlet movieName = '';\n\nformField?.addEventListener('submit', event => {\n  event.preventDefault();\n  textError.classList.add('is-hidden');\n  spinner.classList.remove('is-hidden');\n  movieName = formField.elements.query.value.trim();\n  storage.remove(POPULAR_STORAGE_KEY);\n  if (movieName === '') {\n    spinner.classList.add('is-hidden');\n    return alert('Empty field');\n  }\n  fetchMovies(movieName).then(({ movies }) => {\n    if (movies.length === 0) {\n      spinner.classList.add('is-hidden');\n      textError.classList.remove('is-hidden');\n      return;\n    }\n    storage.save(STORAGE_MOVIES_SEARCH, { movie: movieName });\n    storage.save('movies', movies);\n    homeList.innerHTML = movieCards(movies);\n    setTimeout(() => { spinner.classList.add('is-hidden') }, 2000);\n    removeSceletonLoad();\n  });\n});\n\nexport function movieCards(movies) {\n  return movies\n    .map(({ id, poster_path, title, original_title, genres_ids, release_date }) => {\n      const imgUrl = poster_path\n        ? `https://image.tmdb.org/t/p/w500${poster_path}`\n        : // : './images/netuNichego.png';\n        'https://via.placeholder.com/395x574/FFFFFF/FF001B?text=No+poster';\n      const year = new Date(release_date).getFullYear();\n      return `<li class=\"home-card js-modal-open placeholdify\" data-card-movie-id=\"${id}\">\n            <a href=\"#\" class=\"home-card__link\">\n                <div class=\"card-info\">\n                    <img class=\"home-card__img\" src=\"${imgUrl}\" alt=\"${title}\">\n                    <h2 class=\"card-info__title\">${original_title}</h2>\n                    <p class=\"card-info_descr\">\n                        <span>${genres_ids}</span>\n                        |\n                        <span>${year}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`;\n    })\n    .join('');\n}\n\n\n\nasync function fetchMovies(movieName, page) {\n  const searchParams = new URLSearchParams({\n    api_key: '659c146febfafc17fd54baa17527f7fa',\n    language: 'en-US',\n    query: movieName,\n  });\n\n  return fetch(`https://api.themoviedb.org/3/search/movie?${searchParams}&page=${page}`)\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      throw new Error(res.statusText);\n    })\n    .then(data => {\n      return {\n        movies: data.results,\n      };\n    });\n\n}\n\n\n//load last page search\n\nexport function loadFetchMovies(currentPage) {\n  textError.classList.add('is-hidden');\n  spinner.classList.remove('is-hidden');\n  movieName = storageLastSearchText?.movie;\n  storage.save(STORAGE_PAGE_KEY, { value: currentPage });\n  if (movieName === '') {\n    spinner.classList.add('is-hidden');\n    return alert('Empty field');\n  }\n  fetchMovies(movieName, currentPage).then(({ movies }) => {\n    if (movies.length === 0) {\n\n      spinner.classList.add('is-hidden');\n      textError.classList.remove('is-hidden');\n      return;\n    }\n    storage.save('movies', movies);\n    homeList.innerHTML = movieCards(movies);\n    setTimeout(() => { spinner.classList.add('is-hidden') }, 2000);\n    removeSceletonLoad();\n  });\n};\n\n\n\n","import storage from './storage';\nimport { POPULAR_STORAGE_KEY } from './visitEvents';\nimport { removeSceletonLoad } from './sceletonLoad';\n\nconst KEY = '659c146febfafc17fd54baa17527f7fa';\nconst homeList = document.querySelector('.home-list');\nconst API_URL_POPULAR = `https://api.themoviedb.org/3/trending/movie/week?api_key=${KEY}`;\nconst spinner = document.querySelector('.spinner-loader');\n\nasync function fetchFilms(API_URL_POPULAR) {\n\n  let response = await fetch(\n    `${API_URL_POPULAR}`\n  );\n  return response.json();\n}\n\nasync function fetchGenres() {\n  let response = await fetch(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${KEY}&language=en-US`\n  );\n  return response.json();\n}\n\nfetchGenres().then(({ genres }) => {\n  const arr = [...genres];\n  localStorage.setItem('arrow', JSON.stringify(arr));\n});\nconst values = storage.load('arrow');\n\n\nfetchFilms(API_URL_POPULAR).then(({ results }) => {\n\n  results.poster_path;\n\n\n  const mark = results\n    .map(\n      ({\n        id,\n        poster_path,\n        title,\n        original_title,\n        genre_ids,\n        release_date,\n        original_name,\n        first_air_date,\n      }) => {\n        const genreArr = [];\n        let other = '';\n        for (const genreId of genre_ids) {\n          for (const value of values) {\n            if (genreId === value.id) {\n              genreArr.push(value.name);\n              if (genre_ids.length > 2) {\n                other = ',Other';\n              }\n            }\n          }\n        }\n\n        let a = release_date;\n\n        let b = first_air_date;\n        if (release_date) {\n          a = a.slice(0, 4);\n        }\n        if (first_air_date) {\n          b = b.slice(0, 4);\n        }\n\n        const imgUrl = `https://image.tmdb.org/t/p/w500${poster_path}`;\n        return `<li class=\"home-card js-modal-open placeholdify\" data-card-movie-id=\"${id}\">\n            <a href=\"#\" class=\"home-card__link\">\n                <div class=\"card-info\">\n                    <img class=\"home-card__img\" src=\"${imgUrl}\" alt=\"${title}\">\n                    <h2 class=\"card-info__title\">${original_title || original_name}</h2>\n                    <p class=\"card-info_descr\">\n                        <span>${genreArr.splice(0, 2)}  ${other}</span>\n                        \n                        |\n                        <span>${a || b}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`;\n      }\n\n  )\n    \n     .join('');\n   spinner.classList.remove('is-hidden');\n   setTimeout(() => { spinner.classList.add('is-hidden') }, 2000);\n   removeSceletonLoad();\n\n  storage.save('movies', results);\n  homeList.insertAdjacentHTML('beforeend', mark);\n});\n\n// export default fetchFilms;\n\nexport function loadPopularStoragePage(currentPage) {\n\n  homeList.innerHTML = \"\";\n  page = currentPage;\n  storage.save(POPULAR_STORAGE_KEY, page);\n\n  fetchGenres().then(({ genres }) => {\n    const arr = [...genres];\n    localStorage.setItem('arrow', JSON.stringify(arr));\n  });\n  const values = storage.load('arrow');\n\n  \n\n  fetchFilms(`https://api.themoviedb.org/3/trending/movie/week?api_key=${KEY}&page=${currentPage}`).then(({ results }) => {\n\n    results.poster_path;\n\n\n    const mark = results\n      .map(\n        ({\n          id,\n          poster_path,\n          title,\n          original_title,\n          genre_ids,\n          release_date,\n          original_name,\n          first_air_date,\n        }) => {\n          const genreArr = [];\n          let other = '';\n          for (const genreId of genre_ids) {\n            for (const value of values) {\n              if (genreId === value.id) {\n                genreArr.push(value.name);\n                if (genre_ids.length > 2) {\n                  other = ',Other';\n                }\n              }\n            }\n          }\n\n          let a = release_date;\n\n          let b = first_air_date;\n          if (release_date) {\n            a = a.slice(0, 4);\n          }\n          if (first_air_date) {\n            b = b.slice(0, 4);\n          }\n\n          const imgUrl = `https://image.tmdb.org/t/p/w500${poster_path}`;\n          return `<li class=\"home-card js-modal-open placeholdify\" data-card-movie-id=\"${id}\">\n            <a href=\"#\" class=\"home-card__link\">\n                <div class=\"card-info\">\n                    <img class=\"home-card__img\" src=\"${imgUrl}\" alt=\"${title}\">\n                    <h2 class=\"card-info__title\">${original_title || original_name}</h2>\n                    <p class=\"card-info_descr\">\n                        <span>${genreArr.splice(0, 2)}  ${other}</span>\n                        \n                        |\n                        <span>${a || b}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`;\n        }\n      )\n\n      .join('');\n    setTimeout(() => {\n      const arr = document.querySelectorAll('.placeholdify');\n      arr.forEach(el => el.classList.remove('placeholdify'));\n\n    }, 2000);\n\n    storage.save('movies', results);\n    homeList.insertAdjacentHTML('beforeend', mark);\n  });\n}\n","import { loadFetchMovies } from \"./fetchMovies\";\nimport { loadPopularStoragePage } from \"./loadPage\";\n\nconst inputRef = document.querySelector('.js-search-form');\nconst gallery = document.querySelector('.js-card-library');\n\nconst btn1Ref = document.querySelector('[data-index=\"1\"]');\nconst btn2Ref = document.querySelector('[data-index=\"2\"]');\nconst btn3Ref = document.querySelector('[data-index=\"3\"]');\nconst btn4Ref = document.querySelector('[data-index=\"4\"]');\nconst btn5Ref = document.querySelector('[data-index=\"5\"]');\nconst firstPageRef = document.querySelector('.first-button');\nconst lastPageRef = document.querySelector('.last-button');\nconst paginationRef = document.querySelector('.pagination-container');\nconst rightArrowRef = document.querySelector('.arrow-right');\nconst leftArrowRef = document.querySelector('.arrow-left');\nconst prevDotsRef = document.querySelector('#previous');\nconst afterDotsRef = document.querySelector('#after');\n\npaginationRef.addEventListener('click', onPaginationClick);\n\nlet currentPage = 1;\n\nlet btns = document.querySelectorAll('.pagination-button');\n\nprevDotsRef.hidden = true;\nleftArrowRef.hidden = true;\nfirstPageRef.hidden = true;\n\nfunction onPaginationClick(event) {\n  if (event.target.tagName === 'BUTTON') {\n    if (Number(event.target.textContent)) {\n      currentPage = Number(event.target.textContent);    \n    }\n    \n    prevDotsRef.hidden = true;\n    afterDotsRef.hidden = true;\n\n    if (event.target.classList.contains('pagination-button')) {\n      btns.forEach(el => el.classList.remove('pagination--current'));\n      event.target.classList.add('pagination--current');\n    }\n\n    if (event.target.classList.contains('arrow-right') && currentPage < 1000) {\n      btns.forEach(el => el.classList.remove('pagination--current'));\n      btn1Ref.classList.add('pagination--current');\n      btn1Ref.textContent = Number(btn1Ref.textContent) + 5;\n      btn2Ref.textContent = Number(btn2Ref.textContent) + 5;\n      btn3Ref.textContent = Number(btn3Ref.textContent) + 5;\n      btn4Ref.textContent = Number(btn4Ref.textContent) + 5;\n      btn5Ref.textContent = Number(btn5Ref.textContent) + 5;\n      currentPage = btn1Ref.textContent;\n    }\n\n    if (event.target.classList.contains('arrow-left') && currentPage >= 5) {\n      btns.forEach(el => el.classList.remove('pagination--current'));\n      btn1Ref.textContent = Number(btn1Ref.textContent) - 5;\n      btn2Ref.textContent = Number(btn2Ref.textContent) - 5;\n      btn3Ref.textContent = Number(btn3Ref.textContent) - 5;\n      btn4Ref.textContent = Number(btn4Ref.textContent) - 5;\n      btn5Ref.textContent = Number(btn5Ref.textContent) - 5;\n      btn5Ref.classList.add('pagination--current');\n      currentPage = btn5Ref.textContent;\n    }\n\n    if (event.target.classList.contains('first-button')) {\n      btns.forEach(el => el.classList.remove('pagination--current'));\n      btn1Ref.textContent = 1;\n      btn2Ref.textContent = 2;\n      btn3Ref.textContent = 3;\n      btn4Ref.textContent = 4;\n      btn5Ref.textContent = 5;\n      btn1Ref.classList.add('pagination--current');\n      currentPage = btn1Ref.textContent;\n      leftArrowRef.hidden = true;\n      prevDotsRef.hidden = true;\n      firstPageRef.hidden = true;\n    }\n\n    if (event.target.classList.contains('last-button')) {\n      btns.forEach(el => el.classList.remove('pagination--current'));\n      btn1Ref.textContent = Number(lastPageRef.textContent) - 4;\n      btn2Ref.textContent = Number(lastPageRef.textContent) - 3;\n      btn3Ref.textContent = Number(lastPageRef.textContent) - 2;\n      btn4Ref.textContent = Number(lastPageRef.textContent) - 1;\n      btn5Ref.textContent = lastPageRef.textContent;\n      btn5Ref.classList.add('pagination--current');\n      currentPage = btn5Ref.textContent;\n      rightArrowRef.hidden = true;\n      afterDotsRef.hidden = true;\n      lastPageRef.hidden = true;\n    }\n\n    if (Number(currentPage) > 5) {\n      leftArrowRef.hidden = false;\n      prevDotsRef.hidden = false;\n      firstPageRef.hidden = false;\n    } else {\n      leftArrowRef.hidden = true;\n      prevDotsRef.hidden = true;\n      firstPageRef.hidden = true;\n    }\n\n    if (Number(currentPage) < 996) {\n      rightArrowRef.hidden = false;\n      afterDotsRef.hidden = false;\n      lastPageRef.hidden = false;\n    }\n    if (gallery !== null) {\n      gallery.innerHTML = '';\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    }\n      if (inputRef.value !== '') {\n      loadFetchMovies(currentPage)\n    } else {\n      loadPopularStoragePage(currentPage)        \n    } \n  }\n}\n\nlet pageSize = 9;\n\nfunction defineResultsPerPage() {\n  if (window.innerWidth >= 1024) {\n    pageSize = 9;\n  } else if (window.innerWidth >= 768 && window.innerWidth < 1024) {\n    pageSize = 8;\n  } else if (window.innerWidth < 768) {\n    pageSize = 4;\n  }\n  return pageSize;\n}\n\n\nexport { currentPage, defineResultsPerPage };\n\n","import { loadPopularStoragePage } from \"./loadPage\";\nimport { loadFetchMovies } from \"./fetchMovies\";\nimport storage from \"./storage\";\nimport { currentPage } from \"./pagination\";\n\nexport const STORAGE_PAGE_KEY = 'last visit page';\nexport const STORAGE_MOVIES_SEARCH = 'last visit search'\nexport const POPULAR_STORAGE_KEY = 'last visit popular'\nexport const popularStoragePage = storage.load(POPULAR_STORAGE_KEY);\nexport const storagePage = storage.load(STORAGE_PAGE_KEY);\nexport const storageLastSearchText = storage.load(STORAGE_MOVIES_SEARCH);\n\n export const refs = {\n    comeBackBtn: document.querySelector('button.js-visit-back-btn'),\n    visitModal: document.querySelector(\"[data-modal].dialog\"),   \n    visitCloseBtn: document.querySelector(\"button.js-visit-close-btn\"),\n};\n    refs.comeBackBtn.addEventListener(\"click\", comeBackBtnToggle); \n    refs.visitCloseBtn.addEventListener(\"click\", toggleModal);\n    \n    \nlet timerId;\n(() => {\n    if ( popularStoragePage == 1 && storagePage === null ) {\n        return \n    } else {        \n        toggleModal();\n        return timerId = setTimeout(() => { toggleModal() }, 15000);      \n    }\n})();    \n\n\nfunction toggleModal() {   \n    refs.visitModal.classList.toggle(\"is-hidden\");    \n    \n    if (refs.visitModal.classList.value.includes(\"hidden\") === true) {\n           clearTimeout(timerId);  \n        refs.comeBackBtn.removeEventListener(\"click\", comeBackBtnToggle);        \n        refs.visitCloseBtn.removeEventListener(\"click\", toggleModal);\n    };\n};\n\nfunction comeBackBtnToggle() {   \n     let currentPage = 1\n    refs.visitModal.classList.toggle(\"is-hidden\");  \n\n    if (popularStoragePage > 1) {\n        currentPage = popularStoragePage;\n        loadPopularStoragePage(currentPage);\n    } else {\n        currentPage = storagePage;\n        loadFetchMovies(storagePage);\n    }\n    \n    if (refs.visitModal.classList.value.includes(\"hidden\") === true) {\n           clearTimeout(timerId);  \n        refs.comeBackBtn.removeEventListener(\"click\", comeBackBtnToggle);        \n        refs.visitCloseBtn.removeEventListener(\"click\", toggleModal);\n    };\n};\n","// import loadPage from './loadPage';\n// import { fetchFilms } from './loadPage';\n\n// 1. Для кожного зображення додати loading='lazy'\n// 2. Для того, щоб працювало в усіх браузерах, потрібна бібліотека lazysizes(знайти на git hub)\n// можна використати CDN lazysizes.min.js  , додати скрипт динамічно\n// - додати всім зображенням class='lazyload'\n// - src замінити на data-src\n// 3. видаляємо слухача за допомогою 'once'(підтримується майже всіма браузерами), додається в опції. Після того як\n// addEventListener спрацює один раз, він самовидалиться\n\n\n// Feature detection\nif ('loading' in HTMLImageElement.prototype) {\n    console.log('Браузер підтримує lazyload');\n    const lazyImages = document.querySelectorAll('image[loading=\"lazy\"]');\n    lazyImages.forEach(image => {\n        image.src = image.dataset.src;\n    });\n// supported in browser\n} else {\n    console.log('Браузер не підтримує lazyload');\n    const script = document.createElement('script');\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js';\n    script.integrity = 'sha512-q583ppKrCRc7N5O0n2nzUiJ+suUv7Et1JGels4bXOaMFQcamPk9HjdUknZuuFjBNs7tsMuadge5k9RzdmO+1GQ==';\n    script.crossOrigin = 'anonymous';\n    script.referrerpolicy = 'no-referrer';\n    document.body.appendChild(script);\n// fetch polyfill/third-party library\n}\n\nconst lazyImages = document.querySelectorAll('image[data-src]');\n    console.log(lazyImages);\n\n    lazyImages.forEach(image => {\n    image.addEventListener('load', onImageLoaded, { once: true });\n});\n\nfunction onImageLoaded(event) {\n    console.log(\"Зображення завантажилось\");\n// можна додати класс, анімацію і тд\n// event.target.classList.add();\n}"],"names":["parcelRequire","$5uEKZ","$16230cf6cab73dd4$var$formField","document","querySelector","$16230cf6cab73dd4$var$homeList","$16230cf6cab73dd4$var$spinner","$16230cf6cab73dd4$var$textError","$16230cf6cab73dd4$var$movieName","$16230cf6cab73dd4$export$867842ca7ae981de","movies","map","id","poster_path","title","original_title","genres_ids","release_date","Date","getFullYear","join","async","$16230cf6cab73dd4$var$fetchMovies","movieName1","page","searchParams","URLSearchParams","api_key","language","query","fetch","then","res","ok","json","Error","statusText","data","results","$16230cf6cab73dd4$export$2e24e71fef222f12","currentPage","classList","add","remove","storageLastSearchText","movie","default","save","STORAGE_PAGE_KEY","value","alert","length","innerHTML","setTimeout","$3iG6G","removeSceletonLoad","addEventListener","event","preventDefault","elements","trim","POPULAR_STORAGE_KEY","STORAGE_MOVIES_SEARCH","$1bab9c519cfa82bc$var$inputRef","$1bab9c519cfa82bc$var$gallery","$1bab9c519cfa82bc$var$btn1Ref","$1bab9c519cfa82bc$var$btn2Ref","$1bab9c519cfa82bc$var$btn3Ref","$1bab9c519cfa82bc$var$btn4Ref","$1bab9c519cfa82bc$var$btn5Ref","$1bab9c519cfa82bc$var$firstPageRef","$1bab9c519cfa82bc$var$lastPageRef","$1bab9c519cfa82bc$var$paginationRef","$1bab9c519cfa82bc$var$rightArrowRef","$1bab9c519cfa82bc$var$leftArrowRef","$1bab9c519cfa82bc$var$prevDotsRef","$1bab9c519cfa82bc$var$afterDotsRef","target","tagName","Number","textContent","$1bab9c519cfa82bc$export$385972cd6b54c3e1","hidden","contains","$1bab9c519cfa82bc$var$btns","forEach","el","window","scrollTo","top","behavior","$8a393290a593310b$export$425bbc544d001ad8","querySelectorAll","$ffef372a5b1a0ba3$export$9ff6c77374fb9af4","load","$ffef372a5b1a0ba3$export$1826db2756105efe","$ffef372a5b1a0ba3$export$21666b427502ea6d","comeBackBtn","visitModal","visitCloseBtn","$ffef372a5b1a0ba3$var$timerId","$ffef372a5b1a0ba3$var$toggleModal","toggle","includes","clearTimeout","removeEventListener","$ffef372a5b1a0ba3$var$comeBackBtnToggle","currentPage1","$8a393290a593310b$var$homeList","$8a393290a593310b$var$spinner","$8a393290a593310b$var$fetchFilms","API_URL_POPULAR1","$8a393290a593310b$var$fetchGenres","genres","arr","localStorage","setItem","JSON","stringify","$8a393290a593310b$var$values","values1","mark","genre_ids","original_name","first_air_date","genreArr","other","genreId","push","name","a","b","slice","splice","insertAdjacentHTML","HTMLImageElement","prototype","console","log","image","src","dataset","script","createElement","integrity","crossOrigin","referrerpolicy","body","appendChild","$ead53d6c8d8f066c$var$lazyImages","$ead53d6c8d8f066c$var$onImageLoaded","once"],"version":3,"file":"index.8e2c655d.js.map"}