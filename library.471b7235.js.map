{"mappings":"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","sources":["src/js/modal.js","src/js/storage.js","src/js/checkStoradgeAfterModal.js","src/js/renderLibMovie.js","src/js/cardListWithGenres.js","src/js/sceletonLoad.js","src/js/modalFooter.js"],"sourcesContent":["import storage from './storage';\nimport { rewrite } from './checkStoradgeAfterModal';\n\nexport const backdrop = document.querySelector('[data-modal]');\nexport const closeButton = document.querySelector('[data-modal-close]');\nexport const cardsContainer = document.querySelector('.movies-container');\n\nexport let shouldRewrite = false;\n\ncardsContainer.addEventListener('click', e => {\n  //Тиць по 'js-modal-open' -> відкриває модалку\n  if (e.target.closest('.js-modal-open')) {\n    e.preventDefault();\n    openModal(e.target.closest('.js-modal-open').dataset.cardMovieId);\n  }\n});\n\n// Тиць по 'data-modal-close' ->закриває модалку\ncloseButton.addEventListener('click', closeModal);\n\n//Press по Esc ->закриває модалку\nfunction pressEsc(e) {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n}\n\n// Тиць по backdrop -> закриває модалку\nbackdrop.addEventListener('click', backdropClick);\n\nfunction backdropClick(e) {\n  if (e.currentTarget === e.target) {\n    closeModal();\n    return;\n  }\n  if (e.target.nodeName === 'BUTTON') {\n    addMovieToLibrary(e.target.closest('.movie-btn'));\n    ///changes in lib\n    shouldRewrite = true;\n    ///\n  }\n}\n\n// Якщо модалка відкрита -> кидаємо AddEventListener\nfunction openModal(movieId) {\n  document.addEventListener('keydown', pressEsc);\n\n  backdrop.querySelector('.modal-movie').dataset.modalMovieId = movieId;\n  backdrop.querySelector('.modal-movie').innerHTML = getModalMovieMarkup(movieId);\n  document.body.style.overflow = 'hidden';\n  backdrop.classList.remove('is-hidden');\n  const vote_average = backdrop.querySelector('#out').textContent;\n  outNum(vote_average, '#out');\n}\n\nfunction getMovieFromLocalStorage(movieId, key) {\n  return storage.load(key)?.find(movie => movie.id.toString() === movieId);\n}\n\n// Як тільки закривається модалка -> знімаємо EventListener\nfunction closeModal() {\n  storage.remove('current-movie');\n  document.addEventListener('keydown', pressEsc);\n  document.body.style.overflow = '';\n  backdrop.classList.add('is-hidden');\n  ///changes in lib\n  rewrite();\n  shouldRewrite = false;\n  ///\n}\n\nfunction getModalMovieMarkup(movieId) {\n  const currentMovie =\n    getMovieFromLocalStorage(movieId, 'movies') ||\n    getMovieFromLocalStorage(movieId, 'watched-list') ||\n    getMovieFromLocalStorage(movieId, 'queue-list');\n\n  storage.save('current-movie', currentMovie);\n\n  const {\n    poster_path,\n    title,\n    original_title,\n    genre_ids,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    overview,\n  } = currentMovie;\n\n  movieId = movieId.toString();\n\n  let addedClass = isInLibrary('watched-list', movieId.toString()) ? 'added' : '';\n  const btnAddToWatched = `<div class=\"modal-movie__btn movie-btn movie-btn--watched ${addedClass}\" data-modal-add-to=\"watched\">\n                          <div class=\"movie-btn__inner\">\n                            <button class=\"remove\">REMOVE FROM<br>WATCHED</button>\n                            <button class=\"add\">ADD TO<br>WATCHED</button>\n                          </div>\n                        </div>`;\n\n  addedClass = isInLibrary('queue-list', movieId.toString()) ? 'added' : '';\n  const btnAddToQueue = `<div class=\"modal-movie__btn movie-btn movie-btn--queue ${addedClass}\" data-modal-add-to=\"queue\">\n                          <div class=\"movie-btn__inner\">\n                            <button class=\"remove\">REMOVE FROM<br>QUEUE</button>\n                            <button class=\"add\">ADD TO<br>QUEUE</button>\n                          </div>\n                        </div>`;\n\n  return `<div class=\"modal-movie__poster\">\n            <img src='https://image.tmdb.org/t/p/w500${poster_path}' alt=\"${title}\" />\n          </div>\n            <div class=\"modal-movie__info\">\n                <h2 class=\"modal-movie__title\">${title}</h2>\n                <table class=\"movie-table\">\n                    <tr>\n                        <td class=\"movie-table__title\">Vote / Votes</td>\n                        <td class=\"movie-table__info\">\n                            <span id=\"out\" class=\"vote\">${vote_average.toFixed(1)}</span>\n                            <span>/</span>\n                            <span class=\"votes\">${vote_count}</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Popularity</td>\n                        <td class=\"movie-table__info\">${popularity.toFixed(0)}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Original Title</td>\n                        <td class=\"movie-table__info\">${original_title}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Genre</td>\n                        <td class=\"movie-table__info\">${getGenres(genre_ids, 3)}</td>\n                    </tr>\n                </table>\n                <div class=\"modal-movie__box\">\n                <div class=\"modal-movie__about\">\n                    <p class=\"modal-movie__description\">ABOUT</p>\n                    <p class=\"modal-movie__text\">${overview}</p>\n                </div>\n                <div class=\"modal-movie__buttons\">\n                    ${btnAddToWatched}\n                    ${btnAddToQueue}\n                </div>\n                </div>\n            </div>`;\n}\n\n/* -----------------------\n\nModal buttons functionality\n\n----------------------- */\n\nfunction addMovieToLibrary(button) {\n  const key = button.dataset?.modalAddTo + '-list';\n  // const movieId = button.closest('.modal-movie').dataset.modalMovieId;\n  shouldRewrite = true;\n  const SOURCE_KEY = 'current-movie';\n\n  const value = storage.load(SOURCE_KEY);\n\n  if (storage.load(key) && isInLibrary(key, value.id.toString())) {\n    removeFromStorage(key, value, button);\n  } else {\n    if (key.includes('watch') && isInLibrary('queue-list', value.id.toString())) {\n      console.log('already in queue');\n      removeFromStorage(\n        'queue-list',\n        value,\n        button.parentElement.querySelector('.movie-btn--queue')\n      );\n    }\n    addToStorage(key, value, button);\n  }\n}\n\nfunction addToStorage(key, value, button) {\n  ///changes in lib\n  shouldRewrite = true;\n  ///\n  let currentList = storage.load(key) || [];\n  currentList.push(value);\n  button.classList.add('added');\n  storage.save(key, currentList);\n}\n\nfunction removeFromStorage(key, value, button) {\n  ///changes in lib\n  shouldRewrite = true;\n  ///\n  let currentList = storage.load(key) || [];\n  button.classList.remove('added');\n  currentList = currentList.filter(movie => movie.id.toString() != value.id);\n  storage.save(key, currentList);\n}\n\nfunction isInLibrary(storageKey, valueId) {\n  return storage.load(storageKey)?.some(movie => movie.id.toString() === valueId);\n}\n\nfunction outNum(num, elem) {\n  const time = 2500;\n  const step = 0.1;\n  let e = document.querySelector('#out');\n  let n = 0;\n  let t = Math.round(time / (num / step));\n  let interval = setInterval(() => {\n    n = n + step;\n    if (n >= num) {\n      clearInterval(interval);\n    }\n    e.innerHTML = n.toFixed(1);\n  }, t);\n}\n\nexport function getGenres(genre_ids, maxGenresCount) {\n  const genres = storage.load('arrow');\n  const genreArr = [];\n  for (\n    let genreIndex = 0;\n    genreIndex < genre_ids.length && genreIndex < maxGenresCount;\n    genreIndex++\n  ) {\n    for (const value of genres) {\n      if (genre_ids[genreIndex] === value.id) {\n        genreArr.push(value.name);\n      }\n    }\n  }\n  if (genre_ids.length > maxGenresCount) genreArr[maxGenresCount - 1] = 'Other';\n  return genreArr.join(', ');\n}\n","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst remove = key => {\n    try { \n      if (localStorage.getItem(key) !== null) { localStorage.removeItem(key); }\n    } catch (error) {\n        console.error(\"Remove state error: \", error.message);\n    }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n};\n","import { shouldRewrite } from \"./modal\";\nimport { libList, funnyGuyOnBg, spinner } from \"./renderLibMovie\";\nimport { markUpWithGenres } from \"./cardListWithGenres\";\nimport { removeSceletonLoad } from \"./sceletonLoad\";\nimport storage from \"./storage\";\n\n\n\nexport function rewrite() {\n    const current = document.querySelector('.current-page');\n    const itsLib = current.textContent === 'My library';\n    const reloadWillBe = shouldRewrite && itsLib;\n    if (reloadWillBe) {\n        console.log('reload')\n        const btnActive = document.querySelector('.header__btn-active');\n        const itsQueueList = btnActive.textContent === 'Queue';\n        console.log(itsQueueList, 'itsQueueList active')\n        if (itsQueueList) {\n            console.log('q');\n            libList.innerHTML = markUpWithGenres(storage.load('queue-list'));\n            funnyGuyOnBg();\n            spinner.classList.remove('is-hidden');\n            setTimeout(() => {\n                spinner.classList.add('is-hidden');\n            }, 2000);\n            removeSceletonLoad();\n        } else if (!itsQueueList) {\n            console.log('watched-list active')\n            libList.innerHTML = markUpWithGenres(storage.load('watched-list'));\n            funnyGuyOnBg();\n            spinner.classList.remove('is-hidden');\n            setTimeout(() => {\n                spinner.classList.add('is-hidden');\n            }, 2000);\n            removeSceletonLoad();\n        }\n    }\n}\n","import { markUpWithGenres } from './cardListWithGenres';\nimport { removeSceletonLoad } from './sceletonLoad';\nimport storage from './storage';\n\n//containers for render, design changes\nexport const libList = document.querySelector('.library-list');\nexport const spinner = document.querySelector('.spinner-loader');\n//btn accent\nconst active_type = 'header__btn-active';\n\n//listerners\nconst btnOpenWatched = document.querySelector('.js-watched-btn');\nconst btnOpenQue = document.querySelector('.js-queue-btn');\n\nif (document.querySelector('.library-container')) {\n    const btnActive = document.querySelector('.header__btn-active');\n    const itsQueueList = btnActive.textContent === 'Queue';\n    console.log(itsQueueList, 'q')\n    window.onload = () => {\n        storage.load('queue-list').length !== 0 ? libList.innerHTML = markUpWithGenres(storage.load('queue-list')) : libList.innerHTML = '';\n            funnyGuyOnBg();\n            spinner.classList.remove('is-hidden');\n            setTimeout(() => {\n                spinner.classList.add('is-hidden');\n            }, 2000);\n            removeSceletonLoad();\n        }\n    }\n\n\n    //queue btn is active on load\n    btnOpenQue?.addEventListener('click', openQueue);\n    btnOpenWatched?.addEventListener('click', openWatched);\n\n    function openQueue() {\n        libList.innerHTML = markUpWithGenres(arrValuesOfQueue);\n        funnyGuyOnBg();\n        spinner.classList.remove('is-hidden');\n        setTimeout(() => {\n            spinner.classList.add('is-hidden');\n        }, 2000);\n        removeSceletonLoad();\n        btnOpenQue.classList.add(active_type);\n        btnOpenWatched.classList.remove(active_type);\n    }\n\n    function openWatched() {\n        libList.innerHTML = markUpWithGenres(arrValuesOfWatched);\n        funnyGuyOnBg();\n        spinner.classList.remove('is-hidden');\n        setTimeout(() => {\n            spinner.classList.add('is-hidden');\n        }, 2000);\n        removeSceletonLoad();\n        btnOpenQue.classList.remove(active_type);\n        btnOpenWatched.classList.add(active_type);\n    }\n\n\n//data parsed\nexport const queueStorage = localStorage.getItem('queue-list');\nexport const watchedStorage = localStorage.getItem('watched-list');\nexport const arrValuesOfQueue = JSON.parse(queueStorage);\nexport const arrValuesOfWatched = JSON.parse(watchedStorage);\nexport const valuesOfGenres = localStorage.getItem('arrow');\nexport const arrValuesOfGenres = JSON.parse(valuesOfGenres);\n\nexport function funnyGuyOnBg() {\n    const libraryContainer = document.querySelector('.library-container');\n\n    libList.firstChild == null\n        ? libraryContainer.classList.add('lib-bg-img')\n        : libraryContainer.classList.remove('lib-bg-img');\n}\n\n\n","import { getGenres } from './modal';\nimport { arrValuesOfGenres } from './renderLibMovie';\n\nexport function markUpWithGenres(arrFromStorage) {\n  return arrFromStorage\n    .map(\n      ({\n        id,\n        poster_path,\n        title,\n        original_title,\n        genre_ids,\n        release_date,\n        original_name,\n        first_air_date,\n      }) => {\n        let a = release_date;\n\n        let b = first_air_date;\n        if (release_date) {\n          a = a.slice(0, 4);\n        }\n        if (first_air_date) {\n          b = b.slice(0, 4);\n        }\n\n        const imgUrl = `https://image.tmdb.org/t/p/w500${poster_path}`;\n        return `<li class=\"home-card js-modal-open placeholdify\" data-card-movie-id=\"${id}\">\n            <a href=\"#\" class=\"home-card__link\">\n                <div class=\"card-info\">\n                    <img class=\"home-card__img\" src=\"${imgUrl}\" alt=\"${title}\">\n                    <h2 class=\"card-info__title\">${original_title || original_name}</h2>\n                    <p class=\"card-info_descr\">\n                        <span>${getGenres(genre_ids, 3)}</span>\n                        \n                        |\n                        <span>${a || b}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`;\n      }\n    )\n\n    .join('');\n}\n","export function removeSceletonLoad() {\n      setTimeout(() => {\n      const arr = document.querySelectorAll('.placeholdify');\n      arr.forEach(el => el.classList.remove('placeholdify'));\n      },2000);\n}","// const modalLink = document.querySelector('.footer__rights-link');\n// const closeBtn = document.querySelector('.modal__closeBtn');\n// const backDropp = document.querySelector('[data-modal-team]');\n\n// modalLink.addEventListener('click', e => {\n//   e.preventDefault();\n//   backDropp.classList.toggle('is-hidden');\n//   document.addEventListener('keydown', pressEsc);\n// });\n// closeBtn.addEventListener('click', e => {\n//   backDropp.classList.remove('is-hidden');\n// });\n\n// function pressEsc(e) {\n//   if (e.code === 'Escape') {\n//     backDropp.classList.add('is-hidden');\n//     document.removeEventListener('keydown', pressEsc);\n//   }\n// }\n\n// backDropp.addEventListener('click', onBackdropp);\n\n// function onBackdropp(e) {\n//   if (e.target === e.currentTarget) {\n//     document.removeEventListener('keydown', pressEsc);\n//     backDropp.classList.add('is-hidden');\n//   }\n// }\n\nconst refs = {\n  modal: document.querySelector('[data-modal-team]'),\n  closeBtn: document.querySelector('.modal__closeBtn'),\n  openModalTeam: document.querySelector('.footer__rights-link'),\n};\n\n// відкриває модалку\nconsole.log(refs.openModalTeam);\nrefs.openModalTeam.addEventListener('click', e => {\n  e.preventDefault();\n  refs.modal.classList.toggle('is-hidden');\n  document.addEventListener('keydown', pressEsc);\n});\n\n// refs.openModalTeam.addEventListener('click', onOpenModal);\n\n// закриває модалку\nrefs.closeBtn.addEventListener('click', onCloseModal);\n\n// тиць по бекдропу закриває модалку\nrefs.modal.addEventListener('click', onBackdropClick);\n\nfunction onBackdropClick(event) {\n  if (event.currentTarget === event.target) {\n    onCloseModal();\n  }\n}\n\n// тиць по ESC закриває модалку\nfunction pressEsc(event) {\n  if (event.code === 'Escape') {\n    onCloseModal();\n  }\n}\n\nfunction onOpenModal() {\n  document.body.style.overflow = 'hidden';\n  document.addEventListener('keydown', pressEsc);\n  refs.modal.classList.remove('is-hidden');\n}\n\nfunction onCloseModal() {\n  // document.body.style.overflow = '';\n  document.removeEventListener('keydown', pressEsc);\n  refs.modal.classList.add('is-hidden');\n}\n"],"names":["$jzQFI","parcelRequire","$40873ecf3c18e122$export$48e901322468f6d5","document","querySelector","$40873ecf3c18e122$export$efe229eab43a9869","$40873ecf3c18e122$export$583b62a65da9ae06","$40873ecf3c18e122$export$1a5333fb4ddd5ed2","$40873ecf3c18e122$var$pressEsc","e","code","$40873ecf3c18e122$var$closeModal","$40873ecf3c18e122$var$getMovieFromLocalStorage","movieId","key","ref","default","load","find","movie","id","toString","remove","addEventListener","body","style","overflow","classList","add","$3EaqH","rewrite","$40873ecf3c18e122$var$removeFromStorage","value","button","currentList","filter","save","$40873ecf3c18e122$var$isInLibrary","storageKey","valueId","some","$40873ecf3c18e122$export$c5604fa8028da00","genre_ids","maxGenresCount","genres","genreArr","genreIndex","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","push","name","err","return","join","target","closest","preventDefault","dataset","cardMovieId","modalMovieId","innerHTML","currentMovie","poster_path","title","original_title","vote_average","release_date","vote_count","popularity","overview","addedClass","btnAddToWatched","concat","btnAddToQueue","toFixed","$40873ecf3c18e122$var$getModalMovieMarkup","num","elem","time","step","n","t","Math","round","interval","setInterval","clearInterval","$40873ecf3c18e122$var$outNum","textContent","currentTarget","nodeName","modalAddTo","SOURCE_KEY","includes","console","log","parentElement","$40873ecf3c18e122$var$addToStorage","$40873ecf3c18e122$var$addMovieToLibrary","$e40a24b7fc93604f$export$2e2bcd8739ae039","serializedState","JSON","stringify","localStorage","setItem","error","message","getItem","parse","removeItem","$5xtVg","$2a7d329baaadbb39$export$ac774a06f8a156","itsLib","shouldRewrite","itsQueueList","$7lxfF","libList","$1Vkri","markUpWithGenres","funnyGuyOnBg","spinner","setTimeout","$2BIkj","removeSceletonLoad","$559449aba61c1cf3$export$889a3b120e40c69b","$559449aba61c1cf3$export$641374ffb95bc399","$559449aba61c1cf3$var$active_type","$559449aba61c1cf3$var$btnOpenWatched","$559449aba61c1cf3$var$btnOpenQue","$559449aba61c1cf3$var$itsQueueList","window","onload","$559449aba61c1cf3$export$dcf15d3bcfe56fe3","$559449aba61c1cf3$export$9c39882cc3c8fb2d","$559449aba61c1cf3$export$71e637b19c748dac","$559449aba61c1cf3$export$a1447c41bd0e7713","$559449aba61c1cf3$export$83c92c494f55e6d3","$559449aba61c1cf3$export$9b12328d6814fe8c","libraryContainer","firstChild","$166af81e96a2afb9$export$644c7ecedbec0546","arrFromStorage","map","param","original_name","first_air_date","a","b","slice","imgUrl","getGenres","$1e616bd5a1604a68$export$2e4086a123c0d8cd","querySelectorAll","forEach","el","$c596dd6d0e61f3b7$var$refs","modal","closeBtn","openModalTeam","$c596dd6d0e61f3b7$var$pressEsc","event","$c596dd6d0e61f3b7$var$onCloseModal","removeEventListener","toggle"],"version":3,"file":"library.471b7235.js.map"}