{"mappings":"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","sources":["src/js/fetchMovies.js","src/js/storage.js","src/js/pageInStorage.js","src/js/pagination.js","src/js/modal.js"],"sourcesContent":["import storage from './storage';\nimport { storagePage,STORAGE_MOVIES_SEARCH,storageLastSearchText } from './pageInStorage';\n\nconst formField = document.querySelector('.form-field');\nconst homeList = document.querySelector('.home-list');\nconst spinner = document.querySelector('.spinner-loader');\nconst textError = document.querySelector('.search-result');\nlet movieName = '';\nlet page = 1;\n\nformField?.addEventListener('submit', event => {\n  event.preventDefault();\n  textError.classList.add('is-hidden');\n  spinner.classList.remove('is-hidden');\n  movieName = formField.elements.query.value.trim(); \n  if (movieName === '') {\n    spinner.classList.add('is-hidden');\n    return alert('Empty field');\n  }\n  fetchMovies(movieName).then(({ movies }) => {\n    if (movies.length === 0) {\n      spinner.classList.add('is-hidden');\n      textError.classList.remove('is-hidden');\n      return;\n    }\n    storage.save(STORAGE_MOVIES_SEARCH,{movie: movieName});\n    storage.save('movies', movies);\n    homeList.innerHTML = movieCards(movies);\n    spinner.classList.add('is-hidden');\n  });\n});\n\nexport function movieCards(movies) {\n  return movies\n    .map(({ id, poster_path, title, original_title, genres_ids, release_date }) => {\n      const imgUrl = poster_path\n        ? `https://image.tmdb.org/t/p/w500${poster_path}`\n        : // : './images/netuNichego.png';\n          'https://via.placeholder.com/395x574/FFFFFF/FF001B?text=No+poster';\n      const year = new Date(release_date).getFullYear();\n      return `<li class=\"home-card js-modal-open\" data-card-movie-id=\"${id}\">\n            <a href=\"#\" class=\"home-card__link\">\n                <div class=\"card-info\">\n                    <img class=\"home-card__img\" src=\"${imgUrl}\" alt=\"${title}\">\n                    <h2 class=\"card-info__title\">${original_title}</h2>\n                    <p class=\"card-info_descr\">\n                        <span>${genres_ids}</span>\n                        |\n                        <span>${year}</span>\n                    </p>\n                </div>\n            </a>\n        </li>`;\n    })\n    .join('');\n}\n\nasync function fetchMovies(movieName,page) {\n  const searchParams = new URLSearchParams({\n    api_key: '659c146febfafc17fd54baa17527f7fa',\n    language: 'en-US',\n    query: movieName,\n  });\n\n  return fetch(`https://api.themoviedb.org/3/search/movie?${searchParams}&page=${page}`)\n    .then(res => {\n      if (res.ok) {\n        return res.json();\n      }\n      throw new Error(res.statusText);\n    })\n    .then(data => {\n      return {\n        movies: data.results,\n      };\n    });\n}\n\n//load last page search\nexport function loadStoragePage() {      \n  textError.classList.add('is-hidden');\n  spinner.classList.remove('is-hidden');\n  movieName = storageLastSearchText?.movie;\n  page = storagePage?.value;\n  if (movieName === '') {\n    spinner.classList.add('is-hidden');\n    return alert('Empty field');\n  }\n  fetchMovies(movieName,page).then(({ movies }) => {\n    if (movies.length === 0) {\n      spinner.classList.add('is-hidden');\n      textError.classList.remove('is-hidden');\n      return;\n    }\n    storage.save('movies', movies);\n    homeList.innerHTML = movieCards(movies);\n    spinner.classList.add('is-hidden');\n  });\n};\n ","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst remove = key => {\n    try { \n      if (localStorage.getItem(key) !== null) { localStorage.removeItem(key); }\n    } catch (error) {\n        console.error(\"Remove state error: \", error.message);\n    }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n};\n","import storage from './storage';\n// import { currentPage } from './pagination';\nimport * as page from './pagination';\nexport const STORAGE_PAGE_KEY = 'last visit page';\nexport const STORAGE_MOVIES_SEARCH = 'last visit search'\nexport const storagePage = storage.load(STORAGE_PAGE_KEY);\nexport const storageLastSearchText = storage.load(STORAGE_MOVIES_SEARCH);\n\n\nchangeStoragePage();\n\nfunction changeStoragePage() {   \n    storage.save(STORAGE_PAGE_KEY, { value: page.currentPage });\n  \n}\n","// import placeholder from './spinner';\n\nconst listElement = document.querySelector('.js-card');\nconst paginationElement = document.getElementById('pagination');\nconst arrowLeft = document.querySelector('.arrow_left');\nconst arrowRight = document.querySelector('.arrow_right');\nconst warningField = document.querySelector('.header-warning');\nexport let currentPage = 2;\nlet pageCount;\nconst pagesOnWindow = 5;\nlet rows = 20;\n\nfunction resetCurrentPage() {\n  currentPage = 1;\n}\n\n// главная функция для рендера pagination. Callback - функция для работы с fetch (зависит от раздела, где рисуем pagination)\nexport function renderPagination(totalPages, listItems, callback, searchQuery) {\n  paginationElement.innerHTML = '';\n  resetCurrentPage();\n  arrowLeft.removeEventListener('click', onArrowLeftClick);\n  arrowRight.removeEventListener('click', onArrowRightClick);\n\n  function setupPagination(items, wrapper, rowsPerPage) {\n    wrapper.innerHTML = '';\n\n    pageCount = totalPages;\n    let maxLeftPage = currentPage - Math.floor(pagesOnWindow / 2);\n    let maxRightPage = currentPage + Math.floor(pagesOnWindow / 2);\n\n    if (maxLeftPage < 1) {\n      maxLeftPage = 1;\n      maxRightPage = pagesOnWindow;\n    }\n\n    if (maxRightPage > totalPages) {\n      maxLeftPage = totalPages - (pagesOnWindow - 1);\n\n      if (maxLeftPage < 1) {\n        maxLeftPage = 1;\n      }\n      maxRightPage = totalPages;\n    }\n\n    for (let i = 1; i <= totalPages; i++) {\n      if (maxLeftPage !== 1 && i == 1) {\n        let btn = paginationButton(i, items);\n        wrapper.appendChild(btn);\n      }\n\n      if (maxRightPage !== totalPages && i == totalPages) {\n        let btn = paginationButton(i, items);\n        wrapper.appendChild(btn);\n      }\n\n      if (i >= maxLeftPage && i <= maxRightPage) {\n        let btn = paginationButton(i, items);\n        wrapper.appendChild(btn);\n      }\n\n      // добавляет троеточие в pagination в зависимости от текущей страницы и общего к-ва страниц\n      if (\n        totalPages >= 6 &&\n        i == 1 &&\n        currentPage !== 1 &&\n        currentPage !== 2 &&\n        currentPage !== 3\n      ) {\n        const threeDotsEl = addThreeDotsBlock();\n        wrapper.insertBefore(threeDotsEl, wrapper[wrapper.length - 2]);\n      }\n\n      if (\n        pageCount >= 7 &&\n        i == pageCount - 1 &&\n        currentPage !== pageCount &&\n        currentPage !== pageCount - 2 &&\n        currentPage !== pageCount - 1\n      ) {\n        const threeDotsEl = addThreeDotsBlock();\n        wrapper.insertBefore(threeDotsEl, wrapper[1]);\n      }\n    }\n\n    placeholder.spinner.close();\n  }\n\n  // создает троеточия для pagination\n  function addThreeDotsBlock() {\n    const threeDots = document.createElement('div');\n    threeDots.classList.add('threeDots');\n    threeDots.innerText = '...';\n    return threeDots;\n  }\n\n  function paginationButton(page, items) {\n    let button = document.createElement('button');\n    button.innerText = page;\n\n    if (currentPage == page) button.classList.add('active');\n\n    button.addEventListener('click', function () {\n      warningField.textContent = ``;\n      placeholder.spinner.show();\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n      currentPage = page;\n      callback(listElement, currentPage, searchQuery);\n\n      let current_btn = document.querySelector('.pagenumbers button.active');\n      current_btn.classList.remove('active');\n\n      button.classList.add('active');\n      setupPagination(listItems, paginationElement, rows);\n      hideExtremeButtons(totalPages);\n    });\n\n    return button;\n  }\n\n  // ф-кция для отслеживания кликов по стрелке влево\n  function onArrowLeftClick() {\n    if (currentPage > 1) {\n      placeholder.spinner.show();\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n      currentPage--;\n      setupPagination(listItems, paginationElement, rows);\n      callback(listElement, currentPage, searchQuery);\n    }\n\n    disableArrowBtn(totalPages);\n    hideExtremeButtons(totalPages);\n  }\n\n  // ф-кция для отслеживания кликов по стрелке вправо\n  function onArrowRightClick() {\n    if (currentPage < totalPages) {\n      placeholder.spinner.show();\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n      currentPage++;\n      setupPagination(listItems, paginationElement, rows);\n      callback(listElement, currentPage, searchQuery);\n    }\n    disableArrowBtn(totalPages);\n    hideExtremeButtons(totalPages);\n  }\n\n  setupPagination(listItems, paginationElement, rows);\n  arrowLeft.onclick = onArrowLeftClick;\n  arrowRight.onclick = onArrowRightClick;\n\n  hideExtremeButtons(totalPages);\n  disableArrowBtn(totalPages);\n}\n\n// прячет первую и последнюю страницу по бокам для мобильных гаджетов с маленьким экраном\nfunction hideExtremeButtons(totalPages) {\n  try {\n    if (/Android|webOS|iPhone|iPad|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n      // код для мобильных устройств\n      const allPaginationBtns = document.querySelectorAll('#pagination button');\n      if (currentPage > 3) {\n        allPaginationBtns[0].classList.add('hide');\n      } else {\n        allPaginationBtns[0].classList.remove('hide');\n      }\n\n      if (currentPage < totalPages - 3) {\n        allPaginationBtns[allPaginationBtns.length - 1].classList.add('hide');\n      } else {\n        allPaginationBtns[allPaginationBtns.length - 1].classList.remove('hide');\n      }\n    }\n  } catch (error) {}\n}\n\npaginationElement?.addEventListener('click', disableArrowBtnAfterPageClick);\n\nfunction disableArrowBtnAfterPageClick(e) {\n  if (e.target.tagName != 'BUTTON') {\n    return;\n  } else {\n    disableArrowBtn(pageCount);\n  }\n}\n\n// делает неактивными кнопки-стрелки на первой и последней  странице\nfunction disableArrowBtn(totalPages) {\n  if (currentPage === 1) {\n    arrowLeft.classList.add('disabled-arrow');\n  } else {\n    arrowLeft.classList.remove('disabled-arrow');\n  }\n\n  if (currentPage === totalPages) {\n    arrowRight.classList.add('disabled-arrow');\n  } else {\n    arrowRight.classList.remove('disabled-arrow');\n  }\n}\n","import storage from './storage';\n\nconst backdrop = document.querySelector('[data-modal]');\nconst closeButton = document.querySelector('[data-modal-close]');\nconst cardsContainer =\n  document.querySelector('.home-container') ||\n  document.querySelector('.library-container');\n\ncardsContainer.addEventListener('click', e => {\n  //Тиць по 'js-modal-open' -> відкриває модалку\n  if (e.target.closest('.js-modal-open')) {\n    e.preventDefault();\n    openModal(e.target.closest('.js-modal-open').dataset.cardMovieId);\n  }\n});\n\n// Тиць по 'data-modal-close' ->закриває модалку\ncloseButton.addEventListener('click', closeModal);\n\n//Press по Esc ->закриває модалку\nfunction pressEsc(e) {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n}\n\n// Тиць по backdrop -> закриває модалку\nbackdrop.addEventListener('click', backdropClick);\n\nfunction backdropClick(e) {\n  if (e.currentTarget === e.target) {\n    closeModal();\n    return;\n  }\n  if (e.target.nodeName === 'BUTTON') {\n    addMovieToLibrary(e.target.closest('.movie-btn'));\n  }\n}\n\n// Якщо модалка відкрита -> кидаємо AddEventListener\nfunction openModal(movieId) {\n  document.addEventListener('keydown', pressEsc);\n\n  backdrop.querySelector('.modal-movie').dataset.modalMovieId = movieId;\n  backdrop.querySelector('.modal-movie').innerHTML =\n    getModalMovieMarkup(movieId);\n  document.body.style.overflow = 'hidden';\n  backdrop.classList.remove('is-hidden');\n  const { vote_average } =\n    getMovieFromLocalStorage(movieId, 'movies') ||\n    getMovieFromLocalStorage(movieId, 'watched-list') ||\n    getMovieFromLocalStorage(movieId, 'queue-list');\n  outNum(vote_average, '#out');\n}\n\nfunction getMovieFromLocalStorage(movieId, key) {\n  return storage.load(key)?.find(movie => movie.id.toString() === movieId);\n}\n\n// Як тільки закривається модалка -> знімаємо EventListener\nfunction closeModal() {\n  document.addEventListener('keydown', pressEsc);\n  document.body.style.overflow = '';\n  backdrop.classList.add('is-hidden');\n}\n\nfunction getModalMovieMarkup(movieId) {\n  const {\n    poster_path,\n    title,\n    original_title,\n    genres_ids,\n    release_date,\n    vote_average,\n    vote_count,\n    popularity,\n    overview,\n  } =\n    getMovieFromLocalStorage(movieId, 'movies') ||\n    getMovieFromLocalStorage(movieId, 'watched-list') ||\n    getMovieFromLocalStorage(movieId, 'queue-list');\n\n  movieId = movieId.toString();\n\n  // const btnAddToWatched = isInLibrary('watched-list', movieId.toString())\n  //   ? `<button class=\"modal-movie__btn modal-movie_btn-watched added\" data-modal-add-to=\"watched\">REMOVE FROM<br>WATCHED</button>`\n  //   : `<button class=\"modal-movie__btn modal-movie__btn-watched\" data-modal-add-to=\"watched\">ADD TO<br>WATCHED</button>`;\n\n  // const btnAddToQueue = isInLibrary('queue-list', movieId.toString())\n  //   ? `<button class=\"modal-movie__btn modal-movie__btn-queue added\" data-modal-add-to=\"queue\">REMOVE FROM<br>QUEUE</button>`\n  //   : `<button class=\"modal-movie__btn modal-movie__btn-queue\" data-modal-add-to=\"queue\">ADD TO<br>QUEUE</button>`;\n\n  let addedClass = isInLibrary('watched-list', movieId.toString())\n    ? 'added'\n    : '';\n  const btnAddToWatched = `<div class=\"modal-movie__btn movie-btn movie-btn--watched ${addedClass}\" data-modal-add-to=\"watched\">\n                          <div class=\"movie-btn__inner\">\n                            <button class=\"remove\">REMOVE FROM<br>WATCHED</button>\n                            <button class=\"add\">ADD TO<br>WATCHED</button>\n                          </div>\n                        </div>`;\n\n  addedClass = isInLibrary('queue-list', movieId.toString()) ? 'added' : '';\n  const btnAddToQueue = `<div class=\"modal-movie__btn movie-btn movie-btn--queue ${addedClass}\" data-modal-add-to=\"queue\">\n                          <div class=\"movie-btn__inner\">\n                            <button class=\"remove\">REMOVE FROM<br>QUEUE</button>\n                            <button class=\"add\">ADD TO<br>QUEUE</button>\n                          </div>\n                        </div>`;\n\n  return `<div class=\"modal-movie__poster\">\n            <img src='https://image.tmdb.org/t/p/w500${poster_path}' alt=\"${title}\" />\n          </div>\n            <div class=\"modal-movie__info\">\n                <h2 class=\"modal-movie__title\">${title}</h2>\n                <table class=\"movie-table\">\n                    <tr>\n                        <td class=\"movie-table__title\">Vote / Votes</td>\n                        <td class=\"movie-table__info\">\n                            <span id=\"out\" class=\"vote\">${vote_average.toFixed(\n                              1\n                            )}</span>\n                            <span>/</span>\n                            <span class=\"votes\">${vote_count}</span>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Popularity</td>\n                        <td class=\"movie-table__info\">${popularity.toFixed(\n                          0\n                        )}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Original Title</td>\n                        <td class=\"movie-table__info\">${original_title}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie-table__title\">Genre</td>\n                        <td class=\"movie-table__info\">${genres_ids}</td>\n                    </tr>\n                </table>\n                <div class=\"modal-movie__box\">\n                <div class=\"modal-movie__about\">\n                    <p class=\"modal-movie__description\">ABOUT</p>\n                    <p class=\"modal-movie__text\">${overview}</p>\n                </div>\n                <div class=\"modal-movie__buttons\">\n                    ${btnAddToWatched}\n                    ${btnAddToQueue}\n                </div>\n                </div>\n            </div>`;\n}\n\n/* -----------------------\n\nModal buttons functionality\n\n----------------------- */\n\nfunction addMovieToLibrary(button) {\n  // console.dir(button);\n  const key = button.dataset?.modalAddTo + '-list';\n  const movieId = button.closest('.modal-movie').dataset.modalMovieId;\n\n  const value = storage\n    .load('movies')\n    ?.find(movie => movie.id.toString() === movieId);\n  // console.dir(value.id);\n\n  let currentList = storage.load(key) || [];\n  // console.dir(currentList);\n\n  if (storage.load(key) && isInLibrary(key, value.id.toString())) {\n    button.classList.remove('added');\n    currentList = currentList.filter(movie => movie.id.toString() != value.id);\n  } else {\n    currentList.push(value);\n    button.classList.add('added');\n  }\n\n  storage.save(key, currentList);\n}\n\nfunction isInLibrary(storageKey, valueId) {\n  return storage\n    .load(storageKey)\n    ?.some(movie => movie.id.toString() === valueId);\n}\n\nfunction outNum(num, elem) {\n  const time = 2500;\n  const step = 0.1;\n  let e = document.querySelector('#out');\n  let n = 0;\n  let t = Math.round(time / (num / step));\n  let interval = setInterval(() => {\n    n = n + step;\n    if (n >= num) {\n      clearInterval(interval);\n    }\n    e.innerHTML = n.toFixed(1);\n  }, t);\n}\n"],"names":["$5uEKZ","parcelRequire","$16230cf6cab73dd4$var$formField","document","querySelector","$16230cf6cab73dd4$var$homeList","$16230cf6cab73dd4$var$spinner","$16230cf6cab73dd4$var$textError","$16230cf6cab73dd4$var$movieName","$16230cf6cab73dd4$var$page","$16230cf6cab73dd4$export$867842ca7ae981de","movies","map","id","poster_path","title","original_title","genres_ids","release_date","Date","getFullYear","join","async","$16230cf6cab73dd4$var$fetchMovies","movieName1","page1","searchParams","URLSearchParams","api_key","language","query","fetch","then","res","ok","json","Error","statusText","data","results","$16230cf6cab73dd4$export$588d92c3164a0c5a","classList","add","remove","$ijW3m","storageLastSearchText","movie","storagePage","value","alert","length","default","save","innerHTML","addEventListener","event","preventDefault","elements","trim","STORAGE_MOVIES_SEARCH","$3fff5e8daf4b13a6$export$2e2bcd8739ae039","key","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","undefined","parse","removeItem","$d567087ff47545b2$export$6480921c90b27dca","$d567087ff47545b2$export$ade5218dc613f789","$d567087ff47545b2$export$1826db2756105efe","load","$d567087ff47545b2$export$4505c8f675952b2a","$2nhTy","currentPage","$1bab9c519cfa82bc$var$paginationElement","getElementById","$1bab9c519cfa82bc$var$arrowLeft","$1bab9c519cfa82bc$var$arrowRight","$1bab9c519cfa82bc$var$pageCount","$1bab9c519cfa82bc$export$385972cd6b54c3e1","$1bab9c519cfa82bc$var$disableArrowBtn","totalPages","e","target","tagName","$8a7e756c566dd1ea$var$backdrop","$8a7e756c566dd1ea$var$closeButton","$8a7e756c566dd1ea$var$pressEsc","code","$8a7e756c566dd1ea$var$closeModal","$8a7e756c566dd1ea$var$getMovieFromLocalStorage","movieId","ref","find","toString","body","style","overflow","$8a7e756c566dd1ea$var$isInLibrary","storageKey","valueId","some","closest","dataset","modalMovieId","vote_average","vote_count","popularity","overview","addedClass","btnAddToWatched","btnAddToQueue","toFixed","$8a7e756c566dd1ea$var$getModalMovieMarkup","num","elem","time","step","n","t","Math","round","interval","setInterval","clearInterval","$8a7e756c566dd1ea$var$outNum","$8a7e756c566dd1ea$var$openModal","cardMovieId","currentTarget","nodeName","button","ref1","modalAddTo","currentList","filter","push","$8a7e756c566dd1ea$var$addMovieToLibrary"],"version":3,"file":"index.e66fbdbe.js.map"}